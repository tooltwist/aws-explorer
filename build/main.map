{"version":3,"sources":["webpack:///webpack/bootstrap 3303aa278a858e76b830","webpack:///external \"express\"","webpack:///./server/misc/graph.js","webpack:///./server/misc/myAWS.js","webpack:///./lib/types.js","webpack:///./server/index.js","webpack:///external \"nuxt\"","webpack:///./server/api/index.js","webpack:///./server/api/users.js","webpack:///./server/api/graphApi.js","webpack:///external \"aws-sdk\"","webpack:///external \"aws-regions\"","webpack:///./server/misc/util.js","webpack:///./lib/types/subnet.js","webpack:///./lib/types/routeTable.js","webpack:///./lib/types/loadBalancer.js","webpack:///./lib/types/database.js","webpack:///external \"lru-cache\"","webpack:///./server/misc/download.js","webpack:///./nuxt.config.js"],"names":["myAWS","require","types","nodeIndex","AWSNode","type","id","key","keyForNode","data","children","parents","describeFn","fn","childNode","push","tagname","Tags","i","length","tag","Key","Value","ec2Home","region","vpcHome","SUBNET","SECGRP","VPC","NAT","IGW","INSTANCE","ADDR","KEYPAIR","NETIFACE","ROUTETABLE","ALB","TARGETGRP","desc","console","log","forEach","child","environment","toLowerCase","label","reset","nodeWithKey","node","findNode","setData","setDescribe","dumpAll","dump","getIndex","getKeys","keys","getNodes","nodes","nodesByType","arr","filter","sortAlphabetic","sorted","sort","a","b","env1","findEnvironment","env2","environments","map","list","module","exports","index","AWS","awsRegions","pad","INITIAL_REGION","regions","currentRegion","awsRegion","cloudformation","ec2","elbv2","autoscaling","ecs","rds","downloadRegions","callback","describeRegions","err","Regions","r1","r2","RegionName","regionDescription","regionCode","get","name","showRegions","r","public","code","checkAwsRegion","process","exit","substring","CloudFormation","apiVersion","EC2","ELBv2","AutoScaling","ECS","RDS","IMAGE","AZ","COSTCD","LOGICAL","PUBLICIP","LISTENER","RULE","CLUSTER","SERVICE","TASK","DATABASE","CACHE","descriptionFunctions","fns","findTag","SubnetId","GroupId","VpcId","NatGatewayId","InternetGatewayId","InstanceId","AllocationId","TargetGroupName","clusterName","serviceName","GroupName","PublicIp","PrivateIpAddress","LoadBalancerName","containers","description","Description","State","NatGatewayAddresses","DNSName","status","registeredContainerInstancesCount","runningTasksCount","runningCount","version","lastStatus","describe","describeSecurityGroup","describeVpc","describeInstance","HealthCheckPath","Matcher","HttpCode","describeTask","InstanceType","KeyName","Name","PublicIpAddress","s","contact","c","networkBindings","hostPort","port","desiredStatus","memory","cpu","app","express","host","env","HOST","PORT","set","use","config","dev","nuxt","builder","build","render","listen","router","Router","users","stuff","req","res","next","json","parseInt","params","sendStatus","cache","LRU","cacheKey","value","query","reload","download","downloadEverything","stack","graph","obj","str","len","capitalize","toUpperCase","helpers","CidrBlock","useVpcRouteTable","parent","hasPublicRoutes","RouteTableId","Routes","route","GatewayId","DestinationCidrBlock","withHealthchecks","Code","dns","_listeners","targetGroup","listener","_targetGroupNode","link","Protocol","Port","describeTargets","_health","health","Target","Id","TargetHealth","DBInstanceIdentifier","Endpoint","Address","loadBalancersAreLoaded","targetGroupsAreLoaded","instancesAreLoaded","debug","findTargetGroupByARN","arn","all","TargetGroupArn","findInstanceById","JUMPBOX","downloadVpcs","describeVpcs","Vpcs","rec","downloadInstances","describeInstances","Reservations","Instances","instance","indexOf","_isJumpbox","img","ImageId","addChild","Placement","AvailabilityZone","az","ip","sn","vpc","SecurityGroups","g","sg","downloadSubnets","describeSubnets","Subnets","v","downloadSecurityGroups","describeSecurityGroups","grp","downloadNatGateways","describeNatGateways","NatGateways","addr","NetworkInterfaceId","iface","downloadInternetGateways","describeInternetGateways","InternetGateways","igw","Attachments","attachment","downloadAddresses","describeAddresses","Addresses","downloadAvailabilityZones","describeAvailabilityZones","AvailabilityZones","ZoneName","downloadKeyPairs","describeKeyPairs","KeyPairs","downloadNetworkInterfaces","describeNetworkInterfaces","NetworkInterfaces","ni","Association","Attachment","subnet","downloadRouteTables","describeRouteTables","RouteTables","rt","gateways","nat","Associations","assoc","downloadLoadBalancers","describeLoadBalancers","nextALB","LoadBalancers","alb","az2","sgid","describeListeners","LoadBalancerArn","Listeners","nextListener","listenerIndex","DefaultActions","action","describeTargetHealth","healthData","TargetHealthDescriptions","downloadTargetGroups","describeTargetGroups","TargetGroups","tg","loadContainerInstancesForCluster","cluster","instanceForContainer","listContainerInstances","containerInstanceList","containerInstanceArns","containerInstances","describeContainerInstances","containerDefinitions","containerDef","ec2InstanceId","containerInstanceArn","loadServicesForCluster","clusterArn","listServices","serviceListData","serviceArns","describeServices","services","serviceDefinitions","service","serviceDef","loadBalancers","lb","targetGroupArn","loadTasksForCluster","listTasks","taskList","taskArns","tasks","describeTasks","taskDefinitions","downloadClusters","listClusters","clusterList","describeClusters","clusters","clusterArns","clusterDefinitions","nextCluster","clusterDef","pos","taskDef","taskDefinitionArn","lastIndexOf","taskName","parentOfTask","startedBy","childKey","deployments","cnt","task","taskArn","downloadDatabases","describeDBInstances","DBInstances","db","VpcSecurityGroups","sgDef","VpcSecurityGroupId","head","title","meta","charset","content","hid","css","rel","href","extractCSS","loading","color","vendor","extend","ctx","isClient","rules","enforce","test","loader","exclude","postcss","plugins","modules"],"mappings":";;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA,oC;;;;;;;;;;ACAA,IAAMA,QAAQ,mBAAAC,CAAQ,CAAR,CAAd;AACA,IAAMC,QAAQ,mBAAAD,CAAQ,CAAR,CAAd;;AAEA,IAAIE,YAAY,EAAhB,C,CAAqB;;;IAGfC,O;AAEJ,mBAAYC,IAAZ,EAAkBC,EAAlB,EAAsB;AAAA;;AACpB;AACA,SAAKD,IAAL,GAAYA,IAAZ;AACA,SAAKC,EAAL,GAAUA,EAAV;AACA,SAAKC,GAAL,GAAWC,WAAWH,IAAX,EAAiBC,EAAjB,CAAX;AACA,SAAKG,IAAL,GAAY,IAAZ;AACA,SAAKC,QAAL,GAAgB,EAAhB;AACA,SAAKC,OAAL,GAAe,EAAf;AACA,SAAKC,UAAL,GAAkB,IAAlB;AACD;;;;4BAEOH,I,EAAM;AACZ,WAAKA,IAAL,GAAYA,IAAZ;AACD;;;gCAEWI,E,EAAI;AACd;AACD;;;6BAEQC,S,EAAW;AAClB,UAAIA,aAAa,IAAjB,EAAuB;AACrB;AACA,aAAKJ,QAAL,CAAcK,IAAd,CAAmBD,UAAUP,GAA7B;AACAO,kBAAUH,OAAV,CAAkBI,IAAlB,CAAuB,KAAKR,GAA5B;AACD;AACF;;;4BAEOS,O,EAAS;AACf;AACA,UAAI,KAAKP,IAAL,IAAa,KAAKA,IAAL,CAAUQ,IAA3B,EAAiC;AAC/B,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKT,IAAL,CAAUQ,IAAV,CAAeE,MAAnC,EAA2CD,GAA3C,EAAgD;AAC9C,cAAIE,MAAM,KAAKX,IAAL,CAAUQ,IAAV,CAAeC,CAAf,CAAV;AACA,cAAIE,IAAIC,GAAJ,KAAYL,OAAhB,EAAyB;AACvB,mBAAOI,IAAIE,KAAX;AACD;AACF;AACF;AACD,aAAO,IAAP;AACD;;;8BAES;AACR,UAAIC,UAAU,aAAavB,MAAMwB,MAAN,EAAb,GAA8B,6CAA9B,GAA8ExB,MAAMwB,MAAN,EAA5F;AACA,UAAIC,UAAU,aAAazB,MAAMwB,MAAN,EAAb,GAA8B,0CAA9B,GAA2ExB,MAAMwB,MAAN,EAAzF;AACA,cAAQ,KAAKnB,IAAb;AACE,aAAKH,MAAMwB,MAAX;AACE,iBAAOD,UAAU,kBAAV,GAA+B,KAAKnB,EAA3C;AACF,aAAKJ,MAAMyB,MAAX;AACE,iBAAOJ,UAAU,0BAAV,GAAuC,KAAKjB,EAAnD;AACF,aAAKJ,MAAM0B,GAAX;AACE,iBAAOH,UAAU,eAAV,GAA4B,KAAKnB,EAAxC;AACF,aAAKJ,MAAM2B,GAAX;AACE,iBAAOJ,UAAU,sBAAV,GAAmC,KAAKnB,EAAxC,GAA6C,oBAApD;AACF,aAAKJ,MAAM4B,GAAX;AACE,iBAAOL,UAAU,eAAV,GAA4B,KAAKnB,EAAxC;AACF,aAAKJ,MAAM6B,QAAX;AACE,iBAAOR,UAAU,oBAAV,GAAiC,KAAKjB,EAA7C;AACF;AACA;AACA,aAAKJ,MAAM8B,IAAX;AACE,iBAAOT,UAAU,oBAAV,GAAiC,KAAKjB,EAA7C;AACF;AACA;AACA;AACA,aAAKJ,MAAM+B,OAAX;AACE,iBAAOV,UAAU,mBAAV,GAAgC,KAAKjB,EAA5C;AACF,aAAKJ,MAAMgC,QAAX;AACE,iBAAOX,UAAU,0BAAV,GAAuC,KAAKjB,EAAnD;AACF,aAAKJ,MAAMiC,UAAX;AACE,iBAAOV,UAAU,sBAAV,GAAmC,KAAKnB,EAA/C;AACF,aAAKJ,MAAMkC,GAAX;AACE,iBAAOb,UAAU,wBAAV,GAAqC,KAAKjB,EAAjD;AACF,aAAKJ,MAAMmC,SAAX;AACE,iBAAOd,UAAU,uBAAV,GAAoC,KAAKjB,EAAhD;AACF;AACE,iBAAO,IAAP;AA/BJ;AAiCD;;;2BAEM;AACL,UAAI,KAAKM,UAAT,EAAqB;AACnB,YAAI0B,OAAO,KAAK1B,UAAL,CAAgB,IAAhB,CAAX;AACA,YAAI0B,IAAJ,EAAU;AACRC,kBAAQC,GAAR,CAAYF,IAAZ;AACD;AACF,OALD,MAKO;AACLC,gBAAQC,GAAR,CAAY,SAAS,KAAKlC,EAA1B;AACD;AACD;AACA,WAAKI,QAAL,CAAc+B,OAAd,CAAsB,iBAAS;AAC7B;AACAF,gBAAQC,GAAR,CAAY,SAASE,MAAMpC,EAA3B;AACD,OAHD;AAID;;;sCAEiB;AAChB,UAAIqC,cAAc,IAAlB;AACA,UAAI,KAAKlC,IAAL,IAAa,KAAKA,IAAL,CAAUQ,IAA3B,EAAiC;AAC/B,aAAKR,IAAL,CAAUQ,IAAV,CAAewB,OAAf,CAAuB,eAAO;AAC5B,cAAIrB,IAAIC,GAAJ,CAAQuB,WAAR,OAA0B,aAA9B,EAA6C;AAC3CD,0BAAcvB,IAAIE,KAAlB;AACA;AACD;AACF,SALD;AAMD;AACD,aAAOqB,WAAP;AACD;;;4BAEO;AACN,UAAIE,QAAQ,IAAZ;AACA,UAAI,KAAKpC,IAAT,EAAe;AACb,YAAI,KAAKA,IAAL,CAAUQ,IAAd,EAAoB;AAClB,eAAKR,IAAL,CAAUQ,IAAV,CAAewB,OAAf,CAAuB,eAAO;AAC5B,gBAAIrB,IAAIC,GAAJ,CAAQuB,WAAR,OAA0B,MAA9B,EAAsC;AACpCC,sBAAQzB,IAAIE,KAAZ;AACD;AACF,WAJD;AAKD;AACD,YAAI,CAACuB,KAAD,IAAU,KAAKpC,IAAL,CAAU,KAAV,CAAd,EAAgC;AAC9BoC,kBAAQ,KAAKpC,IAAL,CAAU,KAAV,CAAR;AACD;AACF;AACD,UAAI,CAACoC,KAAL,EAAY;AACVA,gBAAQ,KAAKvC,EAAb;AACD;AACD,aAAOuC,KAAP;AACD,K,CAAA;;;;;KAEF;;AAED,SAASC,KAAT,GAAiB;AACf3C,cAAY,EAAZ;AACD;;AAED,SAASK,UAAT,CAAoBH,IAApB,EAA0BC,EAA1B,EAA8B;AAC5B,SAAOD,OAAO,IAAP,GAAcC,EAArB;AACD;;AAED,SAASyC,WAAT,CAAqBxC,GAArB,EAA0B;AACxB,MAAIyC,OAAO7C,UAAUI,GAAV,CAAX;AACA,SAAOyC,IAAP;AACD;;AAED,SAASC,QAAT,CAAkB5C,IAAlB,EAAwBC,EAAxB,EAA4BG,IAA5B,EAAkCG,UAAlC,EAA8C;AAC5C;AACA;AACA;;AAEA,MAAIL,MAAMC,WAAWH,IAAX,EAAiBC,EAAjB,CAAV;AACA,MAAI0C,OAAO7C,UAAUI,GAAV,CAAX;AACA,MAAI,CAACyC,IAAL,EAAW;AACTA,WAAO,IAAI5C,OAAJ,CAAYC,IAAZ,EAAkBC,EAAlB,CAAP;AACAH,cAAUI,GAAV,IAAiByC,IAAjB;AACD;AACD,MAAIvC,IAAJ,EAAU;AACRuC,SAAKE,OAAL,CAAazC,IAAb;AACD;AACD,MAAIG,UAAJ,EAAgB;AACd2B,YAAQC,GAAR,4BAAqCnC,IAArC;AACA2C,SAAKG,WAAL,CAAiBvC,UAAjB;AACD;AACD,SAAOoC,IAAP;AACD;;AAED,SAASI,OAAT,GAAmB;AACjBb,UAAQC,GAAR,CAAY,SAAZ;AACA;AACA,OAAK,IAAIjC,GAAT,IAAgBJ,SAAhB,EAA2B;AACzBoC,YAAQC,GAAR,CAAY,EAAZ;AACA;AACA,QAAIQ,OAAO7C,UAAUI,GAAV,CAAX;AACAyC,SAAKK,IAAL;AACD;AACF;;AAED,SAASC,QAAT,GAAoB;AAClB,SAAOnD,SAAP;AACD;;AAED,SAASoD,OAAT,GAAmB;AACjB,MAAIC,OAAO,EAAX;AACA,OAAK,IAAIjD,GAAT,IAAgBJ,SAAhB,EAA2B;AACzBqD,SAAKzC,IAAL,CAAUR,GAAV;AACD;AACD,SAAOiD,IAAP;AACD;;AAED,SAASC,QAAT,GAAoB;AAClB,MAAIC,QAAQ,EAAZ;AACA,OAAK,IAAInD,GAAT,IAAgBJ,SAAhB,EAA2B;AACzB,QAAI6C,OAAO7C,UAAUI,GAAV,CAAX;AACAmD,UAAM3C,IAAN,CAAWiC,IAAX;AACD;AACD,SAAOU,KAAP;AACD;;AAED,SAASC,WAAT,CAAqBtD,IAArB,EAA2B;AACzB;AACA,MAAIuD,MAAMH,WAAWI,MAAX,CAAkB;AAAA,WAAQb,KAAK3C,IAAL,KAAcA,IAAtB;AAAA,GAAlB,CAAV;AACA,SAAOyD,eAAeF,GAAf,CAAP;AACD;;AAED,SAASE,cAAT,CAAwBF,GAAxB,EAA6B;AAC3B,MAAIG,SAASH,IAAII,IAAJ,CAAS,UAACC,CAAD,EAAGC,CAAH,EAAS;;AAE7B;AACA,QAAIC,OAAOF,EAAEG,eAAF,EAAX;AACA,QAAI,CAACD,IAAL,EAAWA,OAAO,YAAP;AACX,QAAIE,OAAOH,EAAEE,eAAF,EAAX;AACA,QAAI,CAACC,IAAL,EAAWA,OAAO,YAAP;AACX,QAAIF,OAAOE,IAAX,EAAiB;AACf,aAAO,CAAC,CAAR;AACD,KAFD,MAEO,IAAIF,OAAOE,IAAX,EAAiB;AACtB,aAAO,CAAP;AACD;;AAED;AACA,QAAIJ,EAAE3D,EAAF,GAAO4D,EAAE5D,EAAb,EAAiB;AACf,aAAO,CAAC,CAAR;AACD,KAFD,MAEO,IAAI2D,EAAE3D,EAAF,GAAO4D,EAAE5D,EAAb,EAAiB;AACtB,aAAO,CAAP;AACD;AACD,WAAO,CAAP;AACD,GApBY,CAAb;AAqBA,SAAOyD,MAAP;AACD;;AAED;AACA;AACA;AACA;;AAEA;;;AAGA,SAASO,YAAT,GAAwB;AACtB;AACA,MAAIC,MAAM,EAAV;AACAd,aAAWhB,OAAX,CAAmB,gBAAQ;AACzB,QAAIE,cAAcK,KAAKoB,eAAL,EAAlB;AACA,QAAIzB,WAAJ,EAAiB;AACf4B,UAAI5B,WAAJ,IAAmBA,WAAnB;AACD;AACF,GALD;AAMA;AACA,MAAI6B,OAAO,EAAX;AACA,OAAK,IAAIjE,GAAT,IAAgBgE,GAAhB,EAAqB;AACnBC,SAAKzD,IAAL,CAAUR,GAAV;AACD;AACD;AACAiE,OAAKR,IAAL,CAAU,UAACC,CAAD,EAAGC,CAAH,EAAS;AACjB,QAAID,IAAIC,CAAR,EAAW;AACT,aAAO,CAAC,CAAR;AACD,KAFD,MAEO,IAAID,IAAIC,CAAR,EAAW;AAChB,aAAO,CAAC,CAAR;AACD,KAFM,MAEA;AACL,aAAO,CAAP;AACD;AACF,GARD;AASA,SAAOM,IAAP;AACD;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACAC,OAAOC,OAAP,CAAezB,QAAf,GAA0BA,QAA1B;AACAwB,OAAOC,OAAP,CAAe3B,WAAf,GAA6BA,WAA7B;AACA0B,OAAOC,OAAP,CAAetB,OAAf,GAAyBA,OAAzB;AACAqB,OAAOC,OAAP,CAAelE,UAAf,GAA4BA,UAA5B;AACAiE,OAAOC,OAAP,CAAe5B,KAAf,GAAuBA,KAAvB;AACA2B,OAAOC,OAAP,CAAeC,KAAf,GAAuBrB,QAAvB;AACAmB,OAAOC,OAAP,CAAelB,IAAf,GAAsBD,OAAtB;AACAkB,OAAOC,OAAP,CAAehB,KAAf,GAAuBD,QAAvB;AACAgB,OAAOC,OAAP,CAAef,WAAf,GAA6BA,WAA7B;AACAc,OAAOC,OAAP,CAAeJ,YAAf,GAA8BA,YAA9B,C;;;;;;ACjTA,IAAMM,MAAM,mBAAA3E,CAAQ,CAAR,CAAZ;AACA,IAAM4E,aAAa,mBAAA5E,CAAQ,EAAR,CAAnB;AACA,IAAM6E,MAAM,mBAAA7E,CAAQ,EAAR,EAAkB6E,GAA9B;;AAEA,IAAMC,iBAAiB,gBAAvB;AACA,IAAIC,UAAU,EAAd;AACA,IAAIC,gBAAgBF,cAApB;AACA;AACA,IAAIG,YAAY,IAAhB,C,CAAqB;;AAErB,IAAIC,iBAAiB,IAArB;AACA,IAAIC,MAAM,IAAV;AACA,IAAIC,QAAQ,IAAZ;AACA,IAAIC,cAAc,IAAlB;AACA,IAAIC,MAAM,IAAV;AACA,IAAIC,MAAM,IAAV;;AAEA,SAASC,eAAT,CAA0BC,QAA1B,EAAoC;AAClCnD,UAAQC,GAAR,CAAY,qBAAZ;AACA4C,MAAIO,eAAJ,CAAoB,EAApB,EAAwB,UAACC,GAAD,EAAMnF,IAAN,EAAe;AACrC,QAAImF,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAETZ,cAAUvE,KAAKoF,OAAf,CAHqC,CAGd;AACvB;AACAb,cAAUA,QAAQhB,IAAR,CAAa,UAAC8B,EAAD,EAAKC,EAAL,EAAY;AACjC,UAAID,GAAGE,UAAH,GAAgBD,GAAGC,UAAvB,EAAmC;AACjC,eAAO,CAAC,CAAR;AACD,OAFD,MAEO,IAAIF,GAAGE,UAAH,GAAgBD,GAAGC,UAAvB,EAAmC;AACxC,eAAO,CAAC,CAAR;AACD;AACD,aAAO,CAAP;AACD,KAPS,CAAV;AAQA,WAAON,SAAS,IAAT,CAAP;AACD,GAdD;AAeD;;AAED;AACA;AACA,SAASO,iBAAT,CAA4BC,UAA5B,EAAwC;AACtC;AACA,MAAI1E,SAASqD,WAAWsB,GAAX,CAAeD,UAAf,CAAb;AACA,MAAI1E,MAAJ,EAAY;AACV;AACA,WAAOA,OAAO4E,IAAd;AACD;AACD,SAAO,EAAP;AACD;;AAED,SAASC,WAAT,GAAwB;AACtB,OAAK,IAAID,IAAT,IAAiBvB,WAAWG,OAA5B,EAAqC;AACnC,QAAIsB,IAAIzB,WAAWG,OAAX,CAAmBoB,IAAnB,CAAR;AACA,QAAIE,EAAEC,MAAN,EAAc;AACZhE,cAAQC,GAAR,CAAesC,IAAIsB,IAAJ,EAAU,EAAV,CAAf,UAAiCE,EAAEE,IAAnC;AACD;AACF;AACF;;AAED,SAASC,cAAT,CAAyBjF,MAAzB,EAAiC;AAC/B;;AAEA,MAAI,CAACA,MAAL,EAAa;AACX;AACAA,aAASuD,cAAT;AACD;;AAED;AACA;AACA,MAAIvD,WAAW,GAAX,IAAkBA,WAAW,MAA7B,IAAuCA,WAAW,SAAtD,EAAiE;AAC/D6E;AACAK,YAAQC,IAAR,CAAa,CAAb;AACD;;AAED;AACA,OAAK,IAAIP,IAAT,IAAiBvB,WAAWG,OAA5B,EAAqC;AACnC,QAAIxD,OAAOoB,WAAP,OAAyBwD,KAAKQ,SAAL,CAAe,CAAf,EAAkBpF,OAAOL,MAAzB,CAA7B,EAA+D;AAC7DK,eAASqD,WAAWG,OAAX,CAAmBoB,IAAnB,EAAyBI,IAAlC;AACA;AACD;AACF;;AAED;AACA,MAAIF,IAAIzB,WAAWsB,GAAX,CAAe3E,MAAf,CAAR;AACA,MAAI,CAAC8E,CAAL,EAAQ;AACN/D,YAAQC,GAAR,CAAY,2BAA2BhB,MAAvC;AACAkF,YAAQC,IAAR,CAAa,CAAb;AACD;;AAED,MAAIzB,cAAc1D,MAAlB,EAA0B;AACxB;AACA;AACA0D,gBAAYD,gBAAgBzD,MAA5B;AACA2D,qBAAiB,IAAIP,IAAIiC,cAAR,CAAuB;AACtCC,kBAAY,YAD0B;AAEtCtF,cAAQyD;AAF8B,KAAvB,CAAjB;AAIAG,UAAM,IAAIR,IAAImC,GAAR,CAAY;AAChBD,kBAAY,YADI;AAEhBtF,cAAQyD;AAFQ,KAAZ,CAAN;AAIAI,YAAQ,IAAIT,IAAIoC,KAAR,CAAc;AACpBF,kBAAY,YADQ;AAEpBtF,cAAQyD;AAFY,KAAd,CAAR;AAIAK,kBAAc,IAAIV,IAAIqC,WAAR,CAAoB;AAChCH,kBAAY,YADoB;AAEhCtF,cAAQyD;AAFwB,KAApB,CAAd;AAIAM,UAAM,IAAIX,IAAIsC,GAAR,CAAY;AAChBJ,kBAAY,YADI;AAEhBtF,cAAQyD;AAFQ,KAAZ,CAAN;AAIAO,UAAM,IAAIZ,IAAIuC,GAAR,CAAY;AAChBL,kBAAY,YADI;AAEhBtF,cAAQyD;AAFQ,KAAZ,CAAN;AAID;;AAED,SAAOA,aAAP;AACD;;AAEDR,OAAOC,OAAP,CAAeS,cAAf,GAAgC,YAAY;AAC1C,SAAOA,cAAP;AACD,CAFD;;AAIAV,OAAOC,OAAP,CAAeU,GAAf,GAAqB,YAAY;AAC/B,SAAOA,GAAP;AACD,CAFD;;AAIAX,OAAOC,OAAP,CAAea,GAAf,GAAqB,YAAY;AAC/B,SAAOA,GAAP;AACD,CAFD;;AAIAd,OAAOC,OAAP,CAAec,GAAf,GAAqB,YAAY;AAC/B,SAAOA,GAAP;AACD,CAFD;;AAIAf,OAAOC,OAAP,CAAeW,KAAf,GAAuB,YAAY;AACjC,SAAOA,KAAP;AACD,CAFD;;AAIAZ,OAAOC,OAAP,CAAeY,WAAf,GAA6B,YAAY;AACvC,SAAOA,WAAP;AACD,CAFD;;AAIAb,OAAOC,OAAP,CAAelD,MAAf,GAAwB,YAAY;AAClC,SAAOyD,aAAP;AACD,CAFD;;AAIAR,OAAOC,OAAP,CAAeM,OAAf,GAAyB,YAAY;AACnC,SAAOA,OAAP;AACD,CAFD;AAGAP,OAAOC,OAAP,CAAe+B,cAAf,GAAgCA,cAAhC;AACAhC,OAAOC,OAAP,CAAeuB,iBAAf,GAAmCA,iBAAnC;AACAxB,OAAOC,OAAP,CAAee,eAAf,GAAiCA,eAAjC;;AAEAhB,OAAOC,OAAP,CAAeK,cAAf,GAAgCA,cAAhC,C;;;;;;AC3JA;AACAN,OAAOC,OAAP,CAAehD,MAAf,GAAwB,QAAxB;AACA+C,OAAOC,OAAP,CAAe/C,MAAf,GAAwB,gBAAxB;AACA8C,OAAOC,OAAP,CAAe9C,GAAf,GAAqB,uBAArB;AACA6C,OAAOC,OAAP,CAAe7C,GAAf,GAAqB,aAArB;AACA4C,OAAOC,OAAP,CAAe5C,GAAf,GAAqB,kBAArB;AACA2C,OAAOC,OAAP,CAAe3C,QAAf,GAA0B,cAA1B,C,CAAyC;AACzC0C,OAAOC,OAAP,CAAe0C,KAAf,GAAuB,WAAvB;AACA3C,OAAOC,OAAP,CAAe2C,EAAf,GAAoB,mBAApB;AACA5C,OAAOC,OAAP,CAAe1C,IAAf,GAAsB,YAAtB;AACAyC,OAAOC,OAAP,CAAe4C,MAAf,GAAwB,WAAxB;AACA7C,OAAOC,OAAP,CAAe6C,OAAf,GAAyB,kBAAzB;AACA9C,OAAOC,OAAP,CAAe8C,QAAf,GAA0B,mBAA1B;AACA/C,OAAOC,OAAP,CAAezC,OAAf,GAAyB,UAAzB;AACAwC,OAAOC,OAAP,CAAexC,QAAf,GAA0B,mBAA1B;AACAuC,OAAOC,OAAP,CAAevC,UAAf,GAA4B,aAA5B;AACAsC,OAAOC,OAAP,CAAetC,GAAf,GAAqB,eAArB;AACAqC,OAAOC,OAAP,CAAerC,SAAf,GAA2B,cAA3B;AACAoC,OAAOC,OAAP,CAAe+C,QAAf,GAA0B,UAA1B;AACAhD,OAAOC,OAAP,CAAegD,IAAf,GAAsB,MAAtB;AACAjD,OAAOC,OAAP,CAAeiD,OAAf,GAAyB,SAAzB;AACAlD,OAAOC,OAAP,CAAekD,OAAf,GAAyB,SAAzB;AACAnD,OAAOC,OAAP,CAAemD,IAAf,GAAsB,MAAtB;AACApD,OAAOC,OAAP,CAAeoD,QAAf,GAA0B,UAA1B;AACArD,OAAOC,OAAP,CAAeqD,KAAf,GAAuB,OAAvB;;AAEA,SAASC,oBAAT,CAA+BhF,IAA/B,EAAqC;AACnC,UAAQA,KAAK3C,IAAb;AACE,SAAKoE,OAAOC,OAAP,CAAehD,MAApB;AAA4B,aAAO,mBAAAzB,CAAQ,EAAR,CAAP;AAC5B,SAAKwE,OAAOC,OAAP,CAAevC,UAApB;AAAgC,aAAO,mBAAAlC,CAAQ,EAAR,CAAP;AAChC,SAAKwE,OAAOC,OAAP,CAAetC,GAApB;AAAyB,aAAO,mBAAAnC,CAAQ,EAAR,CAAP;AACzB,SAAKwE,OAAOC,OAAP,CAAeoD,QAApB;AAA8B,aAAO,mBAAA7H,CAAQ,EAAR,CAAP;;AAE9B;AACE,aAAO,IAAP;AAPJ;AASD;;AAEDwE,OAAOC,OAAP,CAAepE,EAAf,GAAoB,UAAU0C,IAAV,EAAgB;AAClC,MAAI,CAACA,KAAKvC,IAAV,EAAgB;AACd,WAAO,GAAP;AACD;;AAED,MAAIwH,MAAMD,qBAAqBhF,IAArB,CAAV;AACA,MAAIiF,OAAOA,IAAI3H,EAAf,EAAmB;AACjB,WAAO2H,IAAI3H,EAAJ,CAAO0C,IAAP,EAAa,EAAEkF,gBAAF,EAAWhI,OAAOuE,OAAOC,OAAzB,EAAb,CAAP;AACD;;AAED,UAAQ1B,KAAK3C,IAAb;AACE,SAAK,KAAKqB,MAAV;AACE,aAAOsB,KAAKvC,IAAL,CAAU0H,QAAjB;;AAEF,SAAK,KAAKxG,MAAV;AACE,aAAOqB,KAAKvC,IAAL,CAAU2H,OAAjB;;AAEF,SAAK,KAAKxG,GAAV;AACE,aAAOoB,KAAKvC,IAAL,CAAU4H,KAAjB;;AAEF,SAAK,KAAKxG,GAAV;AACE,aAAOmB,KAAKvC,IAAL,GAAYuC,KAAKvC,IAAL,CAAU6H,YAAtB,GAAqC,GAA5C;;AAEF,SAAK,KAAKxG,GAAV;AACE,aAAOkB,KAAKvC,IAAL,CAAU8H,iBAAjB;;AAEF,SAAK,KAAKxG,QAAV;AACE,aAAOiB,KAAKvC,IAAL,CAAU+H,UAAjB;;AAEF,SAAK,KAAKpB,KAAV;AACE,aAAOpE,KAAK1C,EAAZ;;AAEF,SAAK,KAAK+G,EAAV;AACE,aAAOrE,KAAK1C,EAAZ;;AAEF,SAAK,KAAK0B,IAAV;AACE,aAAOgB,KAAKvC,IAAL,CAAUgI,YAAjB;;AAEF,SAAK,KAAKnB,MAAV;AACE,aAAOtE,KAAKzC,GAAZ;;AAEF,SAAK,KAAKgH,OAAV;AACE,aAAOvE,KAAKzC,GAAZ;;AAEF,SAAK,KAAKiH,QAAV;AACE,aAAOxE,KAAK1C,EAAZ;;AAEF,SAAK,KAAK2B,OAAV;AACE,aAAOe,KAAKzC,GAAZ;;AAEF,SAAK,KAAK2B,QAAV;AACE,aAAOc,KAAK1C,EAAZ;;AAEF,SAAK,KAAK8B,GAAV;AACE,aAAOY,KAAK1C,EAAZ;;AAEF,SAAK,KAAK+B,SAAV;AACE,aAAOW,KAAKvC,IAAL,CAAUiI,eAAjB;;AAEF,SAAK,KAAKjB,QAAV;AACE,aAAOzE,KAAKzC,GAAZ;;AAEF,SAAK,KAAKmH,IAAV;AACE,aAAO1E,KAAKzC,GAAZ;;AAEF,SAAK,KAAKoH,OAAV;AACE,aAAO3E,KAAKvC,IAAL,CAAUkI,WAAjB;;AAEF,SAAK,KAAKf,OAAV;AACE,aAAO5E,KAAKvC,IAAL,CAAUmI,WAAjB;;AAEF,SAAK,KAAKf,IAAV;AACE,aAAO7E,KAAK1C,EAAZ;;AAEF,SAAK,KAAKyH,KAAV;AACE,aAAO/E,KAAKzC,GAAZ;;AAEF;AACE,aAAOyC,KAAKzC,GAAZ;AApEJ;AAsED,CAhFD;;AAkFAkE,OAAOC,OAAP,CAAe7B,KAAf,GAAuB,UAAUG,IAAV,EAAgB;AACrC,MAAIiF,MAAMD,qBAAqBhF,IAArB,CAAV;AACA,MAAIiF,OAAOA,IAAIpF,KAAf,EAAsB;AACpB,WAAOoF,IAAIpF,KAAJ,CAAUG,IAAV,EAAgB,EAAEkF,gBAAF,EAAWhI,OAAOuE,OAAOC,OAAzB,EAAhB,CAAP;AACD;;AAED;AACA,MAAI0B,aAAJ;AACA,UAAQpD,KAAK3C,IAAb;AACE,SAAK,KAAKqB,MAAV;AACE0E,aAAO8B,QAAQlF,IAAR,EAAc,MAAd,CAAP;AACA,aAAOoD,QAAQpD,KAAKvC,IAAL,CAAU0H,QAAzB;;AAEF,SAAK,KAAKxG,MAAV;AACE;AACA;AACA;AACA;AACAyE,aAAO8B,QAAQlF,IAAR,EAAc,MAAd,CAAP;AACA,aAAOoD,QAAQpD,KAAKvC,IAAL,CAAUoI,SAAzB;;AAEF,SAAK,KAAKjH,GAAV;AACEwE,aAAO8B,QAAQlF,IAAR,EAAc,MAAd,CAAP;AACA,aAAOoD,QAAQpD,KAAKzC,GAApB;;AAEF,SAAK,KAAKsB,GAAV;AACEuE,aAAO8B,QAAQlF,IAAR,EAAc,MAAd,CAAP;AACA,UAAIoD,IAAJ,EAAU;AACR,eAAOA,IAAP;AACD;AACD,UAAIpD,KAAKvC,IAAT,EAAe;AACb,eAAOuC,KAAKvC,IAAL,CAAU6H,YAAjB;AACD;AACD,aAAO,GAAP;;AAEF,SAAK,KAAKxG,GAAV;AACE,aAAOkB,KAAKzC,GAAZ;;AAEF,SAAK,KAAKwB,QAAV;AACEqE,aAAO8B,QAAQlF,IAAR,EAAc,MAAd,CAAP;AACA,aAAOoD,QAAQpD,KAAKzC,GAApB;;AAEF,SAAK,KAAK6G,KAAV;AACE,aAAOpE,KAAKzC,GAAZ;;AAEF,SAAK,KAAK8G,EAAV;AACE,aAAOrE,KAAK1C,EAAZ;;AAEF,SAAK,KAAK0B,IAAV;AACE,0BAAkBgB,KAAKvC,IAAL,CAAUqI,QAA5B;;AAEF,SAAK,KAAKxB,MAAV;AACE,aAAOtE,KAAKzC,GAAZ;;AAEF,SAAK,KAAKgH,OAAV;AACE,aAAOvE,KAAKzC,GAAZ;;AAEF,SAAK,KAAKiH,QAAV;AACE,aAAOxE,KAAK1C,EAAZ;;AAEF,SAAK,KAAK2B,OAAV;AACE,aAAOe,KAAKzC,GAAZ;;AAEF,SAAK,KAAK2B,QAAV;AACE,8BAAsBc,KAAKvC,IAAL,CAAUsI,gBAAhC;;AAEF,SAAK,KAAK3G,GAAV;AACE,aAAOY,KAAKvC,IAAL,CAAUuI,gBAAjB;;AAEF,SAAK,KAAK3G,SAAV;AACE,aAAOW,KAAKvC,IAAL,CAAUiI,eAAjB;;AAEF,SAAK,KAAKjB,QAAV;AACE,aAAOzE,KAAKzC,GAAZ;;AAEF,SAAK,KAAKmH,IAAV;AACE,aAAO1E,KAAKzC,GAAZ;;AAEF,SAAK,KAAKoH,OAAV;AACE,aAAO3E,KAAKvC,IAAL,CAAUkI,WAAjB;;AAEF,SAAK,KAAKf,OAAV;AACE,aAAO5E,KAAKvC,IAAL,CAAUmI,WAAjB;;AAEF,SAAK,KAAKf,IAAV;AACE,UAAI7E,KAAKvC,IAAL,CAAUwI,UAAV,IAAwBjG,KAAKvC,IAAL,CAAUwI,UAAV,CAAqB9H,MAArB,GAA8B,CAA1D,EAA6D;AAC3D,eAAO6B,KAAKvC,IAAL,CAAUwI,UAAV,CAAqB,CAArB,EAAwB7C,IAA/B;AACD;AACD,aAAO,GAAP;;AAEF,SAAK,KAAK2B,KAAV;AACE,aAAO/E,KAAKzC,GAAZ;;AAEF;AACE,aAAOyC,KAAKzC,GAAZ;AAtFJ;AAwFD,CAhGD;;AAkGAkE,OAAOC,OAAP,CAAewE,WAAf,GAA6B,UAAUlG,IAAV,EAAgB;AAC3C,MAAIiF,MAAMD,qBAAqBhF,IAArB,CAAV;AACA,MAAIiF,OAAOA,IAAIiB,WAAf,EAA4B;AAC1B,WAAOjB,IAAIiB,WAAJ,CAAgBlG,IAAhB,EAAsB,EAAEkF,gBAAF,EAAWhI,OAAOuE,OAAOC,OAAzB,EAAtB,CAAP;AACD;;AAED,UAAQ1B,KAAK3C,IAAb;AACE,SAAK,KAAKsB,MAAV;AACE,aAAOqB,KAAKvC,IAAL,CAAU0I,WAAjB;;AAEF,SAAK,KAAKvH,GAAV;AACE,aAAOoB,KAAKvC,IAAL,CAAU2I,KAAjB;;AAEF,SAAK,KAAKvH,GAAV;AACE,UAAImB,KAAKvC,IAAT,EAAe;AACb,+BAAqBuC,KAAKvC,IAAL,CAAU4I,mBAAV,CAA8B,CAA9B,EAAiCP,QAAtD;AACD;AACDvG,cAAQC,GAAR,CAAY,uCAAZ,EAAqDQ,IAArD;AACA,aAAO,GAAP;;AAEF,SAAK,KAAKlB,GAAV;AACE,aAAOkB,KAAKzC,GAAZ;;AAEF,SAAK,KAAKwB,QAAV;AACE,aAAO,EAAP;;AAEF,SAAK,KAAKqF,KAAV;AACE,aAAOpE,KAAKzC,GAAZ;;AAEF,SAAK,KAAK8G,EAAV;AACE,aAAO,GAAP;;AAEF,SAAK,KAAKrF,IAAV;AACE,2BAAmBgB,KAAKvC,IAAL,CAAUsI,gBAA7B;;AAEF,SAAK,KAAKzB,MAAV;AACE,aAAOtE,KAAKzC,GAAZ;;AAEF,SAAK,KAAKgH,OAAV;AACE,aAAOvE,KAAKzC,GAAZ;;AAEF,SAAK,KAAKiH,QAAV;AACE,aAAO,EAAP;;AAEF,SAAK,KAAKvF,OAAV;AACE,aAAOe,KAAKzC,GAAZ;;AAEF,SAAK,KAAK2B,QAAV;AACE,aAAO,GAAP;;AAEF,SAAK,KAAKE,GAAV;AACE,aAAOY,KAAKvC,IAAL,CAAU6I,OAAjB;;AAEF,SAAK,KAAKjH,SAAV;AACE,aAAO,GAAP;;AAEF,SAAK,KAAKoF,QAAV;AACE,aAAOzE,KAAKzC,GAAZ;;AAEF,SAAK,KAAKmH,IAAV;AACE,aAAO1E,KAAKzC,GAAZ;;AAEF,SAAK,KAAKoH,OAAV;AACE,aAAU3E,KAAKvC,IAAL,CAAU8I,MAAV,CAAiB3G,WAAjB,EAAV,UAA6CI,KAAKvC,IAAL,CAAU+I,iCAAvD,oBAAuGxG,KAAKvC,IAAL,CAAUgJ,iBAAjH;;AAEF,SAAK,KAAK7B,OAAV;AACE,aAAU5E,KAAKvC,IAAL,CAAU8I,MAAV,CAAiB3G,WAAjB,EAAV,UAA6CI,KAAKvC,IAAL,CAAUiJ,YAAvD;;AAEF,SAAK,KAAK7B,IAAV;AACE,0BAAkB7E,KAAKvC,IAAL,CAAUkJ,OAA5B,UAAwC3G,KAAKvC,IAAL,CAAUmJ,UAAV,CAAqBhH,WAArB,EAAxC;;AAEF,SAAK,KAAKmF,KAAV;AACE,aAAO/E,KAAKzC,GAAZ;;AAEF;AACE,kCAA0ByC,KAAKzC,GAA/B;AArEJ;AAuED,CA7ED;;AA+EAkE,OAAOC,OAAP,CAAemF,QAAf,GAA0B,UAAU7G,IAAV,EAAgB;AACxC,MAAIiF,MAAMD,qBAAqBhF,IAArB,CAAV;AACA,MAAIiF,OAAOA,IAAI4B,QAAf,EAAyB;AACvB,WAAO5B,IAAI4B,QAAJ,CAAa7G,IAAb,EAAmB,EAAEkF,gBAAF,EAAWhI,OAAOuE,OAAOC,OAAzB,EAAnB,CAAP;AACD;;AAED,UAAQ1B,KAAK3C,IAAb;AACE,SAAK,KAAKsB,MAAV;AACE,aAAOmI,sBAAsB9G,IAAtB,CAAP;;AAEF,SAAK,KAAKpB,GAAV;AACE,aAAOmI,YAAY/G,IAAZ,CAAP;;AAEF,SAAK,KAAKnB,GAAV;AACE,aAAOmB,KAAKzC,GAAZ;;AAEF,SAAK,KAAKuB,GAAV;AACE,aAAOkB,KAAKzC,GAAZ;;AAEF,SAAK,KAAKwB,QAAV;AACE,aAAOiI,iBAAiBhH,IAAjB,CAAP;;AAEF,SAAK,KAAKoE,KAAV;AACE,aAAOpE,KAAKzC,GAAZ;;AAEF,SAAK,KAAK8G,EAAV;AACE,aAAOrE,KAAKzC,GAAZ;;AAEF,SAAK,KAAKyB,IAAV;AACE,aAAOgB,KAAKzC,GAAZ;;AAEF,SAAK,KAAK+G,MAAV;AACE,aAAOtE,KAAKzC,GAAZ;;AAEF,SAAK,KAAKgH,OAAV;AACE,aAAOvE,KAAKzC,GAAZ;;AAEF,SAAK,KAAKiH,QAAV;AACE,+CAAuCxE,KAAK1C,EAA5C;;AAEF,SAAK,KAAK2B,OAAV;AACE,aAAOe,KAAKzC,GAAZ;;AAEF,SAAK,KAAK2B,QAAV;AACE,aAAOc,KAAKzC,GAAZ;;AAEF,SAAK,KAAK6B,GAAV;AACE,aAAOY,KAAKzC,GAAZ;;AAEF,SAAK,KAAK8B,SAAV;AACE,oEAEUW,KAAKvC,IAAL,CAAUiI,eAFpB,mCAGiB1F,KAAKvC,IAAL,CAAUwJ,eAH3B,sCAIoBjH,KAAKvC,IAAL,CAAUyJ,OAAV,CAAkBC,QAJtC;;AAMF,SAAK,KAAK1C,QAAV;AACE,aAAOzE,KAAKzC,GAAZ;;AAEF,SAAK,KAAKmH,IAAV;AACE,aAAO1E,KAAKzC,GAAZ;;AAEF,SAAK,KAAKoH,OAAV;AACE,aAAO3E,KAAKzC,GAAZ;;AAEF,SAAK,KAAKqH,OAAV;AACE,+DAEU5E,KAAKvC,IAAL,CAAUmI,WAFpB,8BAGY5F,KAAKvC,IAAL,CAAU8I,MAHtB,6BAIWvG,KAAKvC,IAAL,CAAUiJ,YAJrB;;AAMF,SAAK,KAAK7B,IAAV;AACE,aAAOuC,aAAapH,IAAb,CAAP;;AAEF,SAAK,KAAK+E,KAAV;AACE,aAAO/E,KAAKzC,GAAZ;;AAEF;AACE,aAAOyC,KAAKzC,GAAZ;AAzEJ;AA2ED,CAjFD;;AAmFA,SAASyJ,gBAAT,CAA2BhH,IAA3B,EAAiC;AAC/B,MAAIV,OAAO,0BAAX;AACA,MAAI8D,OAAO8B,QAAQlF,IAAR,EAAc,MAAd,CAAX;AACA,MAAIoD,IAAJ,EAAU;AACR9D,YAAQ,aAAa8D,IAAb,GAAoB,MAA5B;AACD;AACD,MAAI8C,cAAchB,QAAQlF,IAAR,EAAc,aAAd,CAAlB;AACA,MAAIkG,WAAJ,EAAiB;AACf5G,YAAQ,oBAAoB4G,WAApB,GAAkC,MAA1C;AACD;AACD5G,qBAAiBU,KAAKvC,IAAL,CAAU4J,YAA3B;AACA/H,wBAAoBU,KAAKvC,IAAL,CAAU6J,OAA9B;AACAhI,sBAAkBU,KAAKvC,IAAL,CAAU2I,KAAV,CAAgBmB,IAAlC;AACA,MAAIvH,KAAKvC,IAAL,CAAU+J,eAAd,EAA+B;AAC7BlI,YAAQ,gBAAgBU,KAAKvC,IAAL,CAAU+J,eAA1B,GAA4C,MAApD;AACD;AACD,SAAOlI,IAAP;AACD;;AAED,SAASyH,WAAT,CAAsB/G,IAAtB,EAA4B;AAC1B,MAAIyH,IAAI,yCAAR;AACA,MAAIrE,OAAO8B,QAAQlF,IAAR,EAAc,MAAd,CAAX;AACA,MAAIoD,IAAJ,EAAU;AACRqE,SAAK,aAAarE,IAAb,GAAoB,MAAzB;AACD;AACDqE,OAAK,WAAWzH,KAAKvC,IAAL,CAAU4H,KAArB,GAA6B,MAAlC;AACAoC,mBAAezH,KAAKvC,IAAL,CAAU2I,KAAzB;AACA,MAAIsB,UAAUxC,QAAQlF,IAAR,EAAc,SAAd,CAAd;AACA,MAAI0H,OAAJ,EAAa;AACXD,SAAK,gBAAgBC,OAAhB,GAA0B,MAA/B;AACD;AACD,SAAOD,CAAP;AACD;;AAED,SAASX,qBAAT,CAAgC9G,IAAhC,EAAsC;AACpC;AACA,MAAIV,4BAAJ;AACAA,mBAAeU,KAAKvC,IAAL,CAAU2H,OAAzB;AACA,MAAIhC,OAAO8B,QAAQlF,IAAR,EAAc,MAAd,CAAX;AACA,MAAIoD,IAAJ,EAAU;AACR9D,2BAAqB8D,IAArB;AACD;AACD9D,4BAAwBU,KAAKvC,IAAL,CAAU0I,WAAlC;AACA7G,0BAAsBU,KAAKvC,IAAL,CAAUoI,SAAhC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAOvG,IAAP;AACD;;AAED,SAAS8H,YAAT,CAAuBpH,IAAvB,EAA6B;AAC3B,MAAIV,yBAAJ;AACAU,OAAKvC,IAAL,CAAUwI,UAAV,CAAqBxG,OAArB,CAA6B,aAAK;AAChCH,+BACUqI,EAAEvE,IADZ,2BAEWuE,EAAEC,eAAF,CAAkBC,QAF7B,eAE+CF,EAAEC,eAAF,CAAkBE,IAFjE;AAGD,GAJD;AAKAxI,8BACaU,KAAKvC,IAAL,CAAUkJ,OADvB,0BAEY3G,KAAKvC,IAAL,CAAUmJ,UAFtB,kCAGoB5G,KAAKvC,IAAL,CAAUsK,aAH9B,0BAIY/H,KAAKvC,IAAL,CAAUuK,MAJtB,uBAKShI,KAAKvC,IAAL,CAAUwK,GALnB;AAOA,SAAO3I,IAAP;AACD;;AAED,SAAS4F,OAAT,CAAkBlF,IAAlB,EAAwBhC,OAAxB,EAAiC;AAC/B;AACA,MAAIgC,KAAKvC,IAAL,IAAauC,KAAKvC,IAAL,CAAUQ,IAA3B,EAAiC;AAC/B,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI8B,KAAKvC,IAAL,CAAUQ,IAAV,CAAeE,MAAnC,EAA2CD,GAA3C,EAAgD;AAC9C,UAAIE,MAAM4B,KAAKvC,IAAL,CAAUQ,IAAV,CAAeC,CAAf,CAAV;AACA,UAAIE,IAAIC,GAAJ,KAAYL,OAAhB,EAAyB;AACvB,eAAOI,IAAIE,KAAX;AACD;AACF;AACF;AACD,SAAO,EAAP;AACD;AACDmD,OAAOC,OAAP,CAAewD,OAAf,GAAyBA,OAAzB,C;;;;;;;;;;;;;ACrdA;AACA;;AAEA;;AAEA,IAAMgD,MAAM,+CAAAC,EAAZ;AACA,IAAMC,OAAO1E,QAAQ2E,GAAR,CAAYC,IAAZ,IAAoB,WAAjC;AACA,IAAMR,OAAOpE,QAAQ2E,GAAR,CAAYE,IAAZ,IAAoB,IAAjC;;AAEAL,IAAIM,GAAJ,CAAQ,MAAR,EAAgBV,IAAhB;;AAEA;AACAI,IAAIO,GAAJ,CAAQ,MAAR,EAAgB,qDAAhB;;AAEA;AACA,IAAIC,SAAS,mBAAAzL,CAAQ,EAAR,CAAb;AACAyL,OAAOC,GAAP,GAAa,EAAE,kBAAyB,YAA3B,CAAb;;AAEA;AACA,IAAMC,OAAO,IAAI,0CAAJ,CAASF,MAAT,CAAb;;AAEA;AACA,IAAIA,OAAOC,GAAX,EAAgB;AACd,MAAME,UAAU,IAAI,6CAAJ,CAAYD,IAAZ,CAAhB;AACAC,UAAQC,KAAR;AACD;;AAED;AACAZ,IAAIO,GAAJ,CAAQG,KAAKG,MAAb;;AAEA;AACAb,IAAIc,MAAJ,CAAWlB,IAAX,EAAiBM,IAAjB;AACA7I,QAAQC,GAAR,CAAY,yBAAyB4I,IAAzB,GAAgC,GAAhC,GAAsCN,IAAlD,E,CAAwD,iC;;;;;;AChCxD,iC;;;;;;;;;;;ACAA;;AAEA;AACA;;AAEA,IAAMmB,SAAS,uDAAAC,EAAf;;AAEA;AACAD,OAAOR,GAAP,CAAW,uDAAX;AACAQ,OAAOR,GAAP,CAAW,0DAAX;;AAEA,yDAAeQ,MAAf,E;;;;;;;;;ACXA;;AAEA,IAAMA,SAAS,uDAAAC,EAAf;;AAEA;AACA,IAAMC,QAAQ,CACZ,EAAE/F,MAAM,WAAR,EAAqBgG,OAAO,cAA5B,EADY,EAEZ,EAAEhG,MAAM,OAAR,EAAiBgG,OAAO,eAAxB,EAFY,EAGZ,EAAEhG,MAAM,WAAR,EAAqBgG,OAAO,cAA5B,EAHY,EAIZ,EAAEhG,MAAM,MAAR,EAAgBgG,OAAO,aAAvB,EAJY,CAAd;;AAOA;AACAH,OAAO9F,GAAP,CAAW,QAAX,EAAqB,UAAUkG,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC7ChK,UAAQC,GAAR,CAAY,YAAZ;AACA8J,MAAIE,IAAJ,CAASL,KAAT;AACD,CAHD;;AAKA;AACAF,OAAO9F,GAAP,CAAW,YAAX,EAAyB,UAAUkG,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACjD,MAAMjM,KAAKmM,SAASJ,IAAIK,MAAJ,CAAWpM,EAApB,CAAX;AACA,MAAIA,MAAM,CAAN,IAAWA,KAAK6L,MAAMhL,MAA1B,EAAkC;AAChCmL,QAAIE,IAAJ,CAASL,MAAM7L,EAAN,CAAT;AACD,GAFD,MAEO;AACLgM,QAAIK,UAAJ,CAAe,GAAf;AACD;AACF,CAPD;;AASA,yDAAeV,MAAf,E;;;;;;;;;;;;;;;AC5BA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA,IAAIW,QAAQ,iDAAAC,CAAI,EAAJ,CAAZ,C,CAAoB;;AAEpB,IAAMZ,SAAS,uDAAAC,EAAf;;AAEA;AACAD,OAAO9F,GAAP,CAAW,gBAAX,EAA6B,UAAUkG,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACrDhK,UAAQC,GAAR,CAAY,oBAAZ,EAAkC6J,IAAIK,MAAtC;AACA,MAAIlL,SAAS6K,IAAIK,MAAJ,CAAWlL,MAAxB;AACAe,UAAQC,GAAR,qBAA8BhB,MAA9B;;AAEA;AACA,MAAIsL,WAAWtL,MAAf;AACA,MAAIuL,QAAQH,MAAMzG,GAAN,CAAU2G,QAAV,CAAZ,CAPqD,CAOrB;AAChC,MAAIT,IAAIW,KAAJ,CAAUC,MAAd,EAAsB;AACpB1K,YAAQC,GAAR,CAAY,iBAAZ;AACAuK,YAAQ,IAAR;AACD;AACD,MAAIA,KAAJ,EAAW;AACTT,QAAIE,IAAJ,CAASO,KAAT;AACA;AACD;;AAED;AACAG,EAAA,sDAAAA,CAASC,kBAAT,CAA4B3L,MAA5B,EAAoC,KAApC,EAA2C,eAAO;AAChD,QAAIoE,GAAJ,EAAS;AACPrD,cAAQC,GAAR,+BAAwChB,MAAxC,EAAkDoE,GAAlD,EAAuDA,IAAIwH,KAA3D;AACAd,UAAIK,UAAJ,CAAe,GAAf;AACA;AACD;AACD,QAAIhI,QAAQ,mDAAA0I,CAAM1I,KAAN,EAAZ;AACA;AACA,QAAI2I,MAAM,EAAV;AACA,SAAK,IAAI/M,GAAT,IAAgBoE,KAAhB,EAAuB;AACrB2I,UAAI/M,GAAJ,IAAWoE,MAAMpE,GAAN,CAAX;AACD;;AAEDgC,YAAQC,GAAR,CAAY,4BAAZ;AACAoK,UAAMpB,GAAN,CAAUsB,QAAV,EAAoBQ,GAApB;;AAEAhB,QAAIE,IAAJ,CAASc,GAAT;AACD,GAjBD;AAkBD,CApCD;;AAsCA,yDAAerB,MAAf,E;;;;;;ACvDA,oC;;;;;;ACAA,wC;;;;;;;ACCA,SAASnH,GAAT,CAAcyI,GAAd,EAAmBC,GAAnB,EAAwB;AACtB,MAAID,OAAO,IAAX,EAAiB;AACfA,UAAM,EAAN;AACD;AACD,SAAOA,IAAIpM,MAAJ,GAAaqM,GAApB,EAAyB;AACvBD,UAAMA,MAAM,GAAZ;AACD;AACD,SAAOA,IAAI3G,SAAJ,CAAc,CAAd,EAAiB4G,GAAjB,CAAP;AACD;;AAED,SAASC,UAAT,CAAqBF,GAArB,EAA0B;AACxB,SAAOA,IAAI3G,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB8G,WAApB,KAAoCH,IAAI3G,SAAJ,CAAc,CAAd,CAA3C;AACD;;AAEDnC,OAAOC,OAAP,CAAeI,GAAf,GAAqBA,GAArB;AACAL,OAAOC,OAAP,CAAe+I,UAAf,GAA4BA,UAA5B,C;;;;;;;;AChBAhJ,OAAOC,OAAP,CAAepE,EAAf,GAAoB,UAAC0C,IAAD,EAAO2K,OAAP,EAAmB;AACrC,SAAO3K,KAAKvC,IAAL,CAAU0H,QAAjB;AACD,CAFD;;AAIA1D,OAAOC,OAAP,CAAe7B,KAAf,GAAuB,UAACG,IAAD,QAAqB;AAAA,MAAbkF,OAAa,QAAbA,OAAa;;AAC1C,MAAI9B,OAAO8B,QAAQlF,IAAR,EAAc,MAAd,CAAX;AACA,SAAOoD,QAAQpD,KAAKvC,IAAL,CAAU0H,QAAzB;AACD,CAHD;;AAKA1D,OAAOC,OAAP,CAAewE,WAAf,GAA6B,UAAClG,IAAD,EAAO2K,OAAP,EAAmB;AAC9C,SAAO3K,KAAKvC,IAAL,CAAUmN,SAAjB;AACD,CAFD;;AAIAnJ,OAAOC,OAAP,CAAemF,QAAf,GAA0B,UAAC7G,IAAD,SAAqB;AAAA,MAAbkF,OAAa,SAAbA,OAAa;;AAC7C;AACA,MAAI5F,gBAAcU,KAAKvC,IAAL,CAAU0H,QAAxB,UAAJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAI/B,OAAO8B,QAAQlF,IAAR,EAAc,MAAd,CAAX;AACA,MAAIoD,IAAJ,EAAU;AACR9D,sBAAgB8D,IAAhB;AACD;;AAED,MAAI8C,cAAchB,QAAQlF,IAAR,EAAc,aAAd,CAAlB;AACA,MAAIkG,WAAJ,EAAiB;AACf5G,8BAAwB4G,WAAxB;AACD;;AAED;AACA,MAAI2E,mBAAmB,IAAvB;AACA7K,OAAKrC,OAAL,CAAa8B,OAAb,CAAqB,kBAAU;AAC7B,QAAIqL,OAAOzN,IAAP,KAAgB,MAAK8B,UAAzB,EAAqC;AACnC0L,yBAAmB,KAAnB;AACD;AACF,GAJD;AAKA,MAAIA,gBAAJ,EAAsB;AACpBvL,YAAQ,sCAAR;AACD;AACD;AACAA,0BAAsBU,KAAKvC,IAAL,CAAUmN,SAAhC;AACA,SAAOtL,IAAP;AACD,CAxCD,C;;;;;;ACbAmC,OAAOC,OAAP,CAAepE,EAAf,GAAoB,UAAC0C,IAAD,EAAO2K,OAAP,EAAmB;AACrC;AACD,CAFD;;AAIAlJ,OAAOC,OAAP,CAAe7B,KAAf,GAAuB,UAACG,IAAD,QAAqB;AAAA,MAAbkF,OAAa,QAAbA,OAAa;;AAC1C,MAAIlF,KAAK+K,eAAT,EAA0B;AACxB,WAAU/K,KAAKvC,IAAL,CAAUuN,YAApB;AACD;AACD,SAAUhL,KAAKvC,IAAL,CAAUuN,YAApB;AACD,CALD;;AAOAvJ,OAAOC,OAAP,CAAewE,WAAf,GAA6B,UAAClG,IAAD,EAAO2K,OAAP,EAAmB;AAC9C;AACD,CAFD;;AAIAlJ,OAAOC,OAAP,CAAemF,QAAf,GAA0B,UAAC7G,IAAD,SAA4B;AAAA,MAApBkF,OAAoB,SAApBA,OAAoB;AAAA,MAAXhI,KAAW,SAAXA,KAAW;;AACpD;AACA,MAAIoC,OAAO,EAAX;AACA,MAAIU,KAAK+K,eAAT,EAA0B;AACxBzL,YAAQ,yBAAR;AACD;AACD,MAAI8D,OAAOpD,KAAKkF,OAAL,CAAa,MAAb,CAAX;AACA,MAAI9B,IAAJ,EAAU;AACR9D,YAAQ,OAAO8D,IAAf;AACD;AACD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA9D,UAAQ,gCAAR;AACAU,OAAKvC,IAAL,CAAUwN,MAAV,CAAiBxL,OAAjB,CAAyB,iBAAS;AAChC,QAAIyL,MAAMC,SAAN,KAAoB,OAAxB,EAAiC;AAC/B7L,cAAQ,aAAa4L,MAAME,oBAAnB,GAA0C,mDAAlD;AACD,KAFD,MAEO;AACL,UAAI7N,MAASL,MAAM2B,GAAf,UAAuBqM,MAAMC,SAAjC;AACA7L,cAAQ,aAAa4L,MAAME,oBAAnB,GAA0C,iDAA1C,GAA8F7N,GAA9F,GAAoG,IAApG,GAA2G2N,MAAMC,SAAjH,GAA6H,kBAArI;AACD;AACF,GAPD;AAQA7L,UAAQ,UAAR;AACA,SAAOA,IAAP;AACD,CA7BD,C;;;;;;ACfAmC,OAAOC,OAAP,GAAiB;AACfpE,MAAI,YAAC0C,IAAD,EAAU;AACZ,WAAOA,KAAK1C,EAAZ;AACD,GAHc;;AAKfuC,SAAO,eAACG,IAAD,QAAqB;AAAA,QAAbkF,OAAa,QAAbA,OAAa;;AAC1B;AACA;AACD,GARc;;AAUfgB,eAAa,qBAAClG,IAAD,EAAU;AACrB,WAAOA,KAAKvC,IAAL,CAAU6I,OAAjB;AACD,GAZc;;AAcfO,YAAU,kBAAC7G,IAAD,SAA4B;AAAA,QAApBkF,OAAoB,SAApBA,OAAoB;AAAA,QAAXhI,KAAW,SAAXA,KAAW;;AACpC,QAAImO,mBAAmB,KAAvB;AACA;AACA,QAAI/L,OAAO,EAAX;AACAA,YAAQ,aAAaU,KAAKvC,IAAL,CAAU2I,KAAV,CAAgBkF,IAA7B,GAAoC,IAA5C;AACA,QAAIC,MAAMvL,KAAKvC,IAAL,CAAU6I,OAApB;AACA,QAAIiF,GAAJ,EAAS;AACPjM,cAAQ,0BAA0BiM,GAA1B,GAAgC,oBAAhC,GAAuDA,GAAvD,GAA6D,QAArE;AACD;AACD,QAAIvL,KAAKwL,UAAT,EAAqB;AACnBxL,WAAKwL,UAAL,CAAgB/L,OAAhB,CAAwB,oBAAY;AAClC,YAAIgM,cAAcC,SAASC,gBAA3B;AACA,YAAI,CAACF,WAAL,EAAkB;AAChB;AACA,cAAIG,OAAOF,SAASG,QAAT,CAAkBjM,WAAlB,KAAkC,KAAlC,GAA0C2L,GAA1C,GAAgD,GAAhD,GAAsDG,SAASI,IAA1E;AACAxM,kBAAQ,cAAcsM,IAAd,GAAqB,2BAArB,GAAmDF,SAASG,QAAT,CAAkBjM,WAAlB,EAAnD,GAAqF,KAArF,GAA6F8L,SAASI,IAAtG,GAA6G,4BAArH;AACD,SAJD,MAIO;AACL;AACA;AACA,cAAIF,QAAOF,SAASG,QAAT,CAAkBjM,WAAlB,KAAkC,KAAlC,GAA0C2L,GAA1C,GAAgD,GAAhD,GAAsDG,SAASI,IAA/D,GAAsEL,YAAYhO,IAAZ,CAAiBwJ,eAAlG;AACA3H,kBAAQ,cAAcsM,KAAd,GAAqB,2BAArB,GAAmDF,SAASG,QAAT,CAAkBjM,WAAlB,EAAnD,GAAqF,KAArF,GAA6F8L,SAASI,IAAtG,GAA6G,uCAA7G,GAAuJL,YAAYlO,GAAnK,GAAyK,IAAzK,GAAgLkO,YAAYnO,EAA5L,GAAiM,SAAzM;;AAEA;AACAgC,kBAAQyM,gBAAgBN,WAAhB,EAA6BJ,gBAA7B,EAA+CnO,KAA/C,CAAR;AACD;AACF,OAfD;AAgBD,KAjBD,MAiBO;AACLoC,cAAQ,sCAAR;AACD;AACD,WAAOA,IAAP;AACD;AA5Cc,CAAjB;;AA+CA,SAASyM,eAAT,CAA0BN,WAA1B,EAAuCJ,gBAAvC,EAAyDnO,KAAzD,EAAgE;AAC9D,MAAIoC,OAAO,EAAX;AACA,MAAI+L,gBAAJ,EAAsB;AACpB,QAAII,YAAYO,OAAZ,IAAuBP,YAAYO,OAAZ,CAAoB7N,MAApB,GAA6B,CAAxD,EAA2D;AACzDsN,kBAAYO,OAAZ,CAAoBvM,OAApB,CAA4B,kBAAU;AACpC;AACA,YAAIlC,MAASL,MAAM6B,QAAf,UAA4BkN,OAAOC,MAAP,CAAcC,EAA9C;AACA7M,gBAAQ,oBAAR;AACAA,gBAAQ,oBAAoB/B,GAApB,GAA0B,IAA1B,GAAiC0O,OAAOC,MAAP,CAAcC,EAA/C,GAAoD,MAA5D;AACA7M,gBAAQ,YAAY2M,OAAOC,MAAP,CAAcJ,IAA1B,GAAiC,MAAjC,GAA0CG,OAAOG,YAAP,CAAoBhG,KAA9D,GAAsE,KAA9E;AACD,OAND;AAOD,KARD,MAQO;AACL9G,cAAQ,kBAAR;AACD;AACF,GAZD,MAYO;AACLA,YAAQ,gDAAR;AACD;AACD,SAAOA,IAAP;AACD,C;;;;;;ACjEDmC,OAAOC,OAAP,GAAiB;AACfpE,MAAI,YAAC0C,IAAD,EAAO2K,OAAP,EAAmB;AACrB;AACA,WAAO3K,KAAKvC,IAAL,CAAU4O,oBAAjB;AACD,GAJc;;AAMfxM,SAAO,eAACG,IAAD,QAAqB;AAAA,QAAbkF,OAAa,QAAbA,OAAa;;AAC1B,WAAOlF,KAAKvC,IAAL,CAAU4O,oBAAjB;AACD,GARc;;AAUfnG,eAAa,qBAAClG,IAAD,EAAO2K,OAAP,EAAmB;AAC9B,QAAI3K,KAAKvC,IAAL,CAAU6O,QAAd,EAAwB;AACtB,aAAUtM,KAAKvC,IAAL,CAAU6O,QAAV,CAAmBC,OAA7B,SAAwCvM,KAAKvC,IAAL,CAAU6O,QAAV,CAAmBR,IAA3D;AACD;AACD;AACD,GAfc;;AAiBfjF,YAAU,kBAAC7G,IAAD,SAAqB;AAAA,QAAbkF,OAAa,SAAbA,OAAa;;AAC7B;AACA,QAAI5F,OAAO,EAAX;AACAA,YAAQ,cAAcU,KAAKqM,oBAA3B;AACA;AACA;;AAEA;AACA;AACA,WAAO/M,IAAP;AACD;AA3Bc,CAAjB,C;;;;;;ACAA,sC;;;;;;ACAA,IAAItC,QAAQ,mBAAAC,CAAQ,CAAR,CAAZ;AACA,IAAMoN,QAAQ,mBAAApN,CAAQ,CAAR,CAAd;AACA,IAAMC,QAAQ,mBAAAD,CAAQ,CAAR,CAAd;;AAEA,IAAIuP,yBAAyB,KAA7B;AACA,IAAIC,wBAAwB,KAA5B;AACA,IAAIC,qBAAqB,KAAzB;;AAEA,IAAMC,QAAQ,KAAd;;AAEA,SAASC,oBAAT,CAA8BC,GAA9B,EAAmC;AACjC;AACA,MAAIC,MAAMzC,MAAM3J,KAAN,EAAV;AACA,OAAK,IAAIxC,IAAI,CAAb,EAAgBA,IAAI4O,IAAI3O,MAAxB,EAAgCD,GAAhC,EAAqC;AACnC,QAAI8B,OAAO8M,IAAI5O,CAAJ,CAAX;AACA;AACA;AACA;AACA,QAAI8B,KAAK3C,IAAL,KAAcH,MAAMmC,SAApB,IAAiCW,KAAKvC,IAAL,CAAUsP,cAAV,KAA6BF,GAAlE,EAAuE;AACrE;AACA,aAAO7M,IAAP;AACD;AACF;AACD,SAAO,IAAP;AACD;;AAED,SAASgN,gBAAT,CAA0B1P,EAA1B,EAA8B;AAC5B;AACA,MAAIwP,MAAMzC,MAAM3J,KAAN,EAAV;AACA,OAAK,IAAIxC,IAAI,CAAb,EAAgBA,IAAI4O,IAAI3O,MAAxB,EAAgCD,GAAhC,EAAqC;AACnC,QAAI8B,OAAO8M,IAAI5O,CAAJ,CAAX;AACA;AACA;AACA;AACA,QAAI,CAAC8B,KAAK3C,IAAL,KAAcH,MAAM6B,QAApB,IAAgCiB,KAAK3C,IAAL,KAAcH,MAAM+P,OAArD,KAAiEjN,KAAKvC,IAAL,CAAU+H,UAAV,KAAyBlI,EAA9F,EAAkG;AAChG;AACA,aAAO0C,IAAP;AACD;AACF;AACD,SAAO,IAAP;AACD;;AAED,SAASkN,YAAT,CAAsBxK,QAAtB,EAAgC;AAC9B,MAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,kBAAZ;AACXxC,QAAMoF,GAAN,GAAY+K,YAAZ,CAAyB,EAAzB,EAA6B,UAACvK,GAAD,EAAMnF,IAAN,EAAe;AAC1C,QAAImF,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET;AACAnF,SAAK2P,IAAL,CAAU3N,OAAV,CAAkB,eAAO;AACvB;AACA4K,YAAMpK,QAAN,CAAe/C,MAAM0B,GAArB,EAA0ByO,IAAIhI,KAA9B,EAAqCgI,GAArC;AACD,KAHD;AAIA,WAAO3K,SAAS,IAAT,CAAP;AACD,GATD;AAUD;;AAED,SAAS4K,iBAAT,CAA2B5K,QAA3B,EAAqC;AACnC;;AAEA1F,QAAMoF,GAAN,GAAYmL,iBAAZ,CAA8B,EAA9B,EAAkC,UAAC3K,GAAD,EAAMnF,IAAN,EAAe;AAC/C,QAAImF,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET;AACAnF,SAAK+P,YAAL,CAAkB/N,OAAlB,CAA0B,eAAO;AAC/B6J,UAAImE,SAAJ,CAAchO,OAAd,CAAsB,oBAAY;;AAEhC;AACA;AACAiO,iBAASzP,IAAT,CAAcwB,OAAd,CAAsB,eAAO;AAC3B,cAAIrB,IAAIC,GAAJ,KAAY,MAAZ,IAAsBD,IAAIE,KAAJ,CAAUqP,OAAV,CAAkB,WAAlB,KAAkC,CAA5D,EAA+D;AAC7DD,qBAASE,UAAT,GAAsB,IAAtB;AACD;AACF,SAJD;;AAMA;AACA,YAAI1P,IAAImM,MAAMpK,QAAN,CAAe/C,MAAM6B,QAArB,EAA+B2O,SAASlI,UAAxC,EAAoDkI,QAApD,CAAR;;AAEA;AACA,YAAIG,MAAMxD,MAAMpK,QAAN,CAAe/C,MAAMkH,KAArB,EAA4BsJ,SAASI,OAArC,EAA8C,IAA9C,CAAV;AACA5P,UAAE6P,QAAF,CAAWF,GAAX;;AAEA;AACA,YAAIH,SAASM,SAAT,IAAsBN,SAASM,SAAT,CAAmBC,gBAA7C,EAA+D;AAC7D,cAAIC,KAAK7D,MAAMpK,QAAN,CAAe/C,MAAMmH,EAArB,EAAyBqJ,SAASM,SAAT,CAAmBC,gBAA5C,CAAT;AACAC,aAAGH,QAAH,CAAY7P,CAAZ;AACD;;AAED;AACA,YAAIwP,SAASlG,eAAb,EAA8B;AAC5B,cAAI2G,KAAK9D,MAAMpK,QAAN,CAAe/C,MAAMsH,QAArB,EAA+BkJ,SAASlG,eAAxC,CAAT;AACA2G,aAAGJ,QAAH,CAAY7P,CAAZ;AACD;;AAED;AACA;AACA,YAAIkQ,KAAK/D,MAAMpK,QAAN,CAAe/C,MAAMwB,MAArB,EAA6BgP,SAASvI,QAAtC,CAAT;AACAiJ,WAAGL,QAAH,CAAY7P,CAAZ;;AAEA;AACA,YAAImQ,MAAMhE,MAAMpK,QAAN,CAAe/C,MAAM0B,GAArB,EAA0B8O,SAASrI,KAAnC,CAAV;AACAgJ,YAAIN,QAAJ,CAAa7P,CAAb;;AAEA;AACAwP,iBAASY,cAAT,CAAwB7O,OAAxB,CAAgC,cAAM;AACpC,cAAI8O,IAAIlE,MAAMpK,QAAN,CAAe/C,MAAMyB,MAArB,EAA6B6P,GAAGpJ,OAAhC,CAAR;AACAmJ,YAAER,QAAF,CAAW7P,CAAX;AACAA,YAAE6P,QAAF,CAAWQ,CAAX;AACD,SAJD;AAKD,OA5CD;AA6CD,KA9CD;AA+CA7B,yBAAqB,IAArB;AACA,WAAOhK,SAAS,IAAT,CAAP;AACD,GArDD;AAsDD;;AAED,SAAS+L,eAAT,CAAyB/L,QAAzB,EAAmC;AACjC,MAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,qBAAZ;;AAEX;;AAEAxC,QAAMoF,GAAN,GAAYsM,eAAZ,CAA4B,EAA5B,EAAgC,UAAC9L,GAAD,EAAMnF,IAAN,EAAe;AAC7C,QAAImF,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET;AACAnF,SAAKkR,OAAL,CAAalP,OAAb,CAAqB,eAAO;AAC1B,UAAI2O,KAAK/D,MAAMpK,QAAN,CAAe/C,MAAMwB,MAArB,EAA6B2O,IAAIlI,QAAjC,EAA2CkI,GAA3C,CAAT;;AAEA;AACA,UAAIuB,IAAIvE,MAAMpK,QAAN,CAAe/C,MAAM0B,GAArB,EAA0ByO,IAAIhI,KAA9B,EAAqC,IAArC,CAAR;AACAuJ,QAAEb,QAAF,CAAWK,EAAX;;AAEA;AACA,UAAIF,KAAK7D,MAAMpK,QAAN,CAAe/C,MAAMmH,EAArB,EAAyBgJ,IAAIY,gBAA7B,EAA+C,IAA/C,CAAT;AACAC,SAAGH,QAAH,CAAYK,EAAZ;AACD,KAVD;AAWA,WAAO1L,SAAS,IAAT,CAAP;AACD,GAhBD;AAiBD;;AAED,SAASmM,sBAAT,CAAgCnM,QAAhC,EAA0C;AACxC,MAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,4BAAZ;AACX;AACA;AACA;AACA;AACA;AACA;;AAEAxC,QAAMoF,GAAN,GAAY0M,sBAAZ,CAAmC,EAAnC,EAAuC,UAAClM,GAAD,EAAMnF,IAAN,EAAe;AACpD,QAAImF,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACTnF,SAAK6Q,cAAL,CAAoB7O,OAApB,CAA4B,eAAO;AACjC;AACA,UAAI8O,IAAIlE,MAAMpK,QAAN,CAAe/C,MAAMyB,MAArB,EAA6BoQ,IAAI3J,OAAjC,EAA0C2J,GAA1C,CAAR;;AAEA;AACA,UAAIH,IAAIvE,MAAMpK,QAAN,CAAe/C,MAAM0B,GAArB,EAA0BmQ,IAAI1J,KAA9B,EAAqC,IAArC,CAAR;AACAuJ,QAAEb,QAAF,CAAWQ,CAAX;AACD,KAPD;AAQA,WAAO7L,SAAS,IAAT,CAAP;AACD,GAXD;AAYD;;AAED,SAASsM,mBAAT,CAA6BtM,QAA7B,EAAuC;AACrC,MAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,yBAAZ;AACX;AACA;AACA;AACA;AACA;;AAEAxC,QAAMoF,GAAN,GAAY6M,mBAAZ,CAAgC,EAAhC,EAAoC,UAACrM,GAAD,EAAMnF,IAAN,EAAe;AACjD,QAAImF,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET;AACAnF,SAAKyR,WAAL,CAAiBzP,OAAjB,CAAyB,eAAO;AAC9BF,cAAQC,GAAR,CAAY,YAAYuP,IAAIzJ,YAA5B;AACA,UAAIiJ,IAAIlE,MAAMpK,QAAN,CAAe/C,MAAM2B,GAArB,EAA0BkQ,IAAIzJ,YAA9B,EAA4CyJ,GAA5C,CAAR;;AAEA,UAAIA,IAAI3I,KAAJ,KAAc,SAAlB,EAA6B;AAC3B;AACA,YAAIgI,KAAK/D,MAAMpK,QAAN,CAAe/C,MAAMwB,MAArB,EAA6BqQ,IAAI5J,QAAjC,EAA2C,IAA3C,CAAT;AACAiJ,WAAGL,QAAH,CAAYQ,CAAZ;;AAEA;AACA,YAAIK,IAAIvE,MAAMpK,QAAN,CAAe/C,MAAM0B,GAArB,EAA0BmQ,IAAI1J,KAA9B,EAAqC,IAArC,CAAR;AACAuJ,UAAEb,QAAF,CAAWQ,CAAX;;AAEA;AACAQ,YAAI1I,mBAAJ,CAAwB5G,OAAxB,CAAgC,gBAAQ;AACtC,cAAI0P,KAAKC,kBAAT,EAA6B;AAC3B,gBAAIC,QAAQhF,MAAMpK,QAAN,CAAe/C,MAAMgC,QAArB,EAA+BiQ,KAAKC,kBAApC,EAAwD,IAAxD,CAAZ;AACAb,cAAER,QAAF,CAAWsB,KAAX;AACD;AACD,cAAIF,KAAKrJ,QAAT,EAAmB;AACjB,gBAAIqI,KAAK9D,MAAMpK,QAAN,CAAe/C,MAAMsH,QAArB,EAA+B2K,KAAKrJ,QAApC,EAA8C,IAA9C,CAAT;AACAyI,cAAER,QAAF,CAAWI,EAAX;AACD;AACF,SATD;AAUD;AACF,KAzBD;AA0BA,WAAOzL,SAAS,IAAT,CAAP;AACD,GA/BD;AAgCD;;AAED,SAAS4M,wBAAT,CAAkC5M,QAAlC,EAA4C;AAC1C,MAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,8BAAZ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACAxC,QAAMoF,GAAN,GAAYmN,wBAAZ,CAAqC,EAArC,EAAyC,UAAC3M,GAAD,EAAMnF,IAAN,EAAe;AACtD,QAAImF,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAETnF,SAAK+R,gBAAL,CAAsB/P,OAAtB,CAA8B,eAAO;AACnC;AACA,UAAIgQ,MAAMpF,MAAMpK,QAAN,CAAe/C,MAAM4B,GAArB,EAA0BuO,IAAI9H,iBAA9B,EAAiD8H,GAAjD,CAAV;;AAEA;AACAA,UAAIqC,WAAJ,CAAgBjQ,OAAhB,CAAwB,sBAAc;AACpC,YAAIkQ,WAAWtK,KAAf,EAAsB;AACpB,cAAIgJ,MAAMhE,MAAMpK,QAAN,CAAe/C,MAAM0B,GAArB,EAA0B+Q,WAAWtK,KAArC,CAAV;AACAgJ,cAAIN,QAAJ,CAAa0B,GAAb;AACD;AACF,OALD;AAMD,KAXD;AAYA,WAAO/M,SAAS,IAAT,CAAP;AACD,GAhBD;AAiBD;;AAED;AACA,SAASkN,iBAAT,CAA2BlN,QAA3B,EAAqC;AACnC,MAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,uBAAZ;AACX;AACA;AACA;AACA;AACA;AACA;;AAEAxC,QAAMoF,GAAN,GAAYyN,iBAAZ,CAA8B,EAA9B,EAAkC,UAACjN,GAAD,EAAMnF,IAAN,EAAe;AAC/C,QAAImF,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET;AACAnF,SAAKqS,SAAL,CAAerQ,OAAf,CAAuB,eAAO;AAC5B,UAAI0P,OAAO9E,MAAMpK,QAAN,CAAe/C,MAAM8B,IAArB,EAA2BqO,IAAI5H,YAA/B,EAA6C4H,GAA7C,CAAX;;AAEA;AACA,UAAIA,IAAIvH,QAAR,EAAkB;AAChB,YAAIqI,KAAK9D,MAAMpK,QAAN,CAAe/C,MAAMsH,QAArB,EAA+B6I,IAAIvH,QAAnC,CAAT;AACAqI,WAAGJ,QAAH,CAAYoB,IAAZ;AACD;AACF,KARD;AASA,WAAOzM,SAAS,IAAT,CAAP;AACD,GAdD;AAeD;;AAED,SAASqN,yBAAT,CAAmCrN,QAAnC,EAA6C;AAC3C,MAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,+BAAZ;AACX;AACA;AACA;AACA;AACA;;AAEAxC,QAAMoF,GAAN,GAAY4N,yBAAZ,CAAsC,EAAtC,EAA0C,UAACpN,GAAD,EAAMnF,IAAN,EAAe;AACvD,QAAImF,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET;AACAnF,SAAKwS,iBAAL,CAAuBxQ,OAAvB,CAA+B,eAAO;AACpC,UAAI8O,IAAIlE,MAAMpK,QAAN,CAAe/C,MAAMmH,EAArB,EAAyBgJ,IAAI6C,QAA7B,EAAuC7C,GAAvC,CAAR;AACD,KAFD;AAGA,WAAO3K,SAAS,IAAT,CAAP;AACD,GARD;AASD;;AAED,SAASyN,gBAAT,CAA0BzN,QAA1B,EAAoC;AAClC,MAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,sBAAZ;AACX;AACA;AACA;AACA;;AAEAxC,QAAMoF,GAAN,GAAYgO,gBAAZ,CAA6B,EAA7B,EAAiC,UAACxN,GAAD,EAAMnF,IAAN,EAAe;AAC9C,QAAImF,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET;AACAnF,SAAK4S,QAAL,CAAc5Q,OAAd,CAAsB,eAAO;AAC3B;AACA4K,YAAMpK,QAAN,CAAe/C,MAAM+B,OAArB,EAA8BoO,IAAI/F,OAAlC,EAA2C+F,GAA3C;AACD,KAHD;AAIA,WAAO3K,SAAS,IAAT,CAAP;AACD,GATD;AAUD;;AAED;AACA,SAAS4N,yBAAT,CAAmC5N,QAAnC,EAA6C;AAC3C,MAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,+BAAZ;AACX;AACA;AACA;AACA;AACA;;AAEAxC,QAAMoF,GAAN,GAAYmO,yBAAZ,CAAsC,EAAtC,EAA0C,UAAC3N,GAAD,EAAMnF,IAAN,EAAe;AACvD,QAAImF,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET;AACAnF,SAAK+S,iBAAL,CAAuB/Q,OAAvB,CAA+B,eAAO;AACpC;AACA,UAAIgR,KAAKpG,MAAMpK,QAAN,CAAe/C,MAAMgC,QAArB,EAA+BmO,IAAI+B,kBAAnC,EAAuD/B,GAAvD,CAAT;;AAEA;AACA,UAAIA,IAAIqD,WAAJ,IAAmBrD,IAAIqD,WAAJ,CAAgB5K,QAAvC,EAAiD;AAC/C,YAAIqI,KAAK9D,MAAMpK,QAAN,CAAe/C,MAAMsH,QAArB,EAA+B6I,IAAIqD,WAAJ,CAAgB5K,QAA/C,CAAT;AACAqI,WAAGJ,QAAH,CAAY0C,EAAZ;AACD;;AAED;AACA,UAAIpD,IAAIsD,UAAR,EAAoB;AAClB,YAAItD,IAAIsD,UAAJ,CAAenL,UAAnB,EAA+B;AAC7B,cAAIkI,WAAWrD,MAAMpK,QAAN,CAAe/C,MAAM6B,QAArB,EAA+BsO,IAAIsD,UAAJ,CAAenL,UAA9C,CAAf;AACAiL,aAAG1C,QAAH,CAAYL,QAAZ;AACD;AACF;;AAED;AACA,UAAIQ,KAAK7D,MAAMpK,QAAN,CAAe/C,MAAMmH,EAArB,EAAyBgJ,IAAIY,gBAA7B,CAAT;AACAC,SAAGH,QAAH,CAAY0C,EAAZ;;AAEA;AACA,UAAIG,SAASvG,MAAMpK,QAAN,CAAe/C,MAAMwB,MAArB,EAA6B2O,IAAIlI,QAAjC,CAAb;AACAyL,aAAO7C,QAAP,CAAgB0C,EAAhB;;AAEA;AACA,UAAIpC,MAAMhE,MAAMpK,QAAN,CAAe/C,MAAM0B,GAArB,EAA0ByO,IAAIhI,KAA9B,CAAV;AACAgJ,UAAIN,QAAJ,CAAa0C,EAAb;AACD,KA7BD;AA8BA,WAAO/N,SAAS,IAAT,CAAP;AACD,GAnCD;AAoCD;;AAED,SAASmO,mBAAT,CAA6BnO,QAA7B,EAAuC;AACrC,MAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,yBAAZ;;AAEXxC,QAAMoF,GAAN,GAAY0O,mBAAZ,CAAgC,EAAhC,EAAoC,UAAClO,GAAD,EAAMnF,IAAN,EAAe;AACjD,QAAImF,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET;AACAnF,SAAKsT,WAAL,CAAiBtR,OAAjB,CAAyB,eAAO;AAC9B;AACA,UAAIuR,KAAK3G,MAAMpK,QAAN,CAAe/C,MAAMiC,UAArB,EAAiCkO,IAAIrC,YAArC,EAAmDqC,GAAnD,CAAT;;AAEA;AACA,UAAI4D,WAAW,EAAf,CAL8B,CAKZ;AAClB5D,UAAIpC,MAAJ,CAAWxL,OAAX,CAAmB,iBAAS;AAC1B,YAAIyL,MAAMC,SAAN,KAAoB,OAAxB,EAAiC;AAC/B;AACD,SAFD,MAEO,IAAID,MAAM5F,YAAV,EAAwB;AAC7B;AACA,cAAIhI,KAAK4N,MAAM5F,YAAf;AACA,cAAI,CAAC2L,SAAS3T,EAAT,CAAL,EAAmB;AACjB,gBAAI4T,MAAM7G,MAAMpK,QAAN,CAAe/C,MAAM2B,GAArB,EAA0BvB,EAA1B,CAAV;AACA0T,eAAGjD,QAAH,CAAYmD,GAAZ;AACA;AACAF,eAAGjG,eAAH,GAAqB,IAArB;AACAkG,qBAAS3T,EAAT,IAAe,IAAf;AACD;AACF,SAVM,MAUA,IAAI4N,MAAMC,SAAV,EAAqB;AAC1B;AACA,cAAI7N,MAAK4N,MAAMC,SAAf;AACA,cAAI,CAAC8F,SAAS3T,GAAT,CAAL,EAAmB;AACjB,gBAAImS,MAAMpF,MAAMpK,QAAN,CAAe/C,MAAM4B,GAArB,EAA0BxB,GAA1B,CAAV;AACA0T,eAAGjD,QAAH,CAAY0B,GAAZ;AACA;AACA;AACAwB,qBAAS3T,GAAT,IAAe,IAAf;AACD;AACF;AACF,OAxBD;;AA0BA;AACA+P,UAAI8D,YAAJ,CAAiB1R,OAAjB,CAAyB,iBAAS;AAChC,YAAI2R,MAAMjM,QAAV,EAAoB;AAClB,cAAIiJ,KAAK/D,MAAMpK,QAAN,CAAe/C,MAAMwB,MAArB,EAA6B0S,MAAMjM,QAAnC,CAAT;AACA6L,aAAGjD,QAAH,CAAYK,EAAZ;AACD;AACF,OALD;;AAOA;AACA,UAAIC,MAAMhE,MAAMpK,QAAN,CAAe/C,MAAM0B,GAArB,EAA0ByO,IAAIhI,KAA9B,CAAV;AACAgJ,UAAIN,QAAJ,CAAaiD,EAAb;AACD,KA3CD;AA4CA,WAAOtO,SAAS,IAAT,CAAP;AACD,GAjDD;AAkDD;;AAED,SAASqJ,eAAT,CAAyBN,WAAzB,EAAsCJ,gBAAtC,EAAwD;AACtD,MAAI/L,OAAO,EAAX;AACA,MAAI+L,gBAAJ,EAAsB;AACpB,QAAII,YAAYO,OAAZ,IAAuBP,YAAYO,OAAZ,CAAoB7N,MAApB,GAA6B,CAAxD,EAA2D;AACzDsN,kBAAYO,OAAZ,CAAoBvM,OAApB,CAA4B,kBAAU;AACpC;AACA,YAAIlC,MAAM8M,MAAM7M,UAAN,CAAiBN,MAAM6B,QAAvB,EAAiCkN,OAAOC,MAAP,CAAcC,EAA/C,CAAV;AACA7M,gBAAQ,oBAAR;AACAA,gBAAQ,oBAAoB/B,GAApB,GAA0B,IAA1B,GAAiC0O,OAAOC,MAAP,CAAcC,EAA/C,GAAoD,MAA5D;AACA7M,gBAAQ,YAAY2M,OAAOC,MAAP,CAAcJ,IAA1B,GAAiC,MAAjC,GAA0CG,OAAOG,YAAP,CAAoBhG,KAA9D,GAAsE,KAA9E;AACD,OAND;AAOD,KARD,MAQO;AACL9G,cAAQ,kBAAR;AACD;AACF,GAZD,MAYO;AACLA,YAAQ,gDAAR;AACD;AACD,SAAOA,IAAP;AACD;;AAED,SAAS+R,qBAAT,CAA+BhG,gBAA/B,EAAiD3I,QAAjD,EAA2D;AACzD,MAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,2BAAZ;;AAEX,MAAI,CAACiN,qBAAL,EAA4B;AAC1BlN,YAAQC,GAAR,CAAY,qEAAZ;AACAD,YAAQC,GAAR,CAAY,iEAAZ;AACD;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAxC,QAAMqF,KAAN,GAAciP,qBAAd,CAAoC,EAApC,EAAwC,UAAC1O,GAAD,EAAMnF,IAAN,EAAe;AACrD,QAAImF,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACT;;AAEA,KAAC,SAAS2O,OAAT,CAAiB5P,KAAjB,EAAwB;AACvB,UAAIA,SAASlE,KAAK+T,aAAL,CAAmBrT,MAAhC,EAAwC;AACtCqO,iCAAyB,IAAzB;AACA,eAAO9J,SAAS,IAAT,CAAP;AACD;AACD,UAAI2K,MAAM5P,KAAK+T,aAAL,CAAmB7P,KAAnB,CAAV;AACA,UAAI8P,MAAMpH,MAAMpK,QAAN,CAAe/C,MAAMkC,GAArB,EAA0BiO,IAAIrH,gBAA9B,EAAgDqH,GAAhD,CAAV;;AAEA;AACAA,UAAI4C,iBAAJ,CAAsBxQ,OAAtB,CAA8B,cAAM;AAClC,YAAIiS,MAAMrH,MAAMpK,QAAN,CAAe/C,MAAMmH,EAArB,EAAyB6J,GAAGgC,QAA5B,CAAV;AACAwB,YAAI3D,QAAJ,CAAa0D,GAAb;;AAEA,YAAIb,SAASvG,MAAMpK,QAAN,CAAe/C,MAAMwB,MAArB,EAA6BwP,GAAG/I,QAAhC,CAAb;AACAyL,eAAO7C,QAAP,CAAgB0D,GAAhB;AACD,OAND;;AAQA;AACApE,UAAIiB,cAAJ,CAAmB7O,OAAnB,CAA2B,gBAAQ;AACjC,YAAI+O,KAAKnE,MAAMpK,QAAN,CAAe/C,MAAMyB,MAArB,EAA6BgT,IAA7B,CAAT;AACAnD,WAAGT,QAAH,CAAY0D,GAAZ;AACD,OAHD;;AAKA;AACA,UAAIpD,MAAMhE,MAAMpK,QAAN,CAAe/C,MAAM0B,GAArB,EAA0ByO,IAAIhI,KAA9B,CAAV;AACAgJ,UAAIN,QAAJ,CAAa0D,GAAb;;AAEA;AACA;AACAzU,YAAMqF,KAAN,GAAcuP,iBAAd,CAAgC;AAC9BC,yBAAiBxE,IAAIwE;AADS,OAAhC,EAEG,UAACjP,GAAD,EAAMnF,IAAN,EAAe;AAChB,YAAImF,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET;AACA6O,YAAIjG,UAAJ,GAAiB/N,KAAKqU,SAAtB;AACA;;AAEA;AACA,SAAC,SAASC,YAAT,CAAsBC,aAAtB,EAAqC;AACpC,cAAIA,iBAAiBvU,KAAKqU,SAAL,CAAe3T,MAApC,EAA4C;AAC1C,mBAAOoT,QAAQ5P,QAAQ,CAAhB,CAAP;AACD;AACD,cAAI+J,WAAWjO,KAAKqU,SAAL,CAAeE,aAAf,CAAf;AACA;;AAEA;AACA;AACAtG,mBAASuG,cAAT,CAAwBxS,OAAxB,CAAgC,kBAAU;;AAExC;AACA,gBAAIgM,cAAcmB,qBAAqBsF,OAAOnF,cAA5B,CAAlB;AACA,gBAAI,CAACtB,WAAL,EAAkB;AAChB;AACA;AACA,qBAAOsG,aAAaC,gBAAgB,CAA7B,CAAP;AACD;AACDtG,qBAASC,gBAAT,GAA4BF,WAA5B;AACAgG,gBAAI1D,QAAJ,CAAatC,WAAb;;AAEA;AACA;AACA,gBAAI,CAACJ,gBAAL,EAAuB;AACrB;AACA,qBAAO0G,aAAaC,gBAAgB,CAA7B,CAAP;AACD;AACD;AACA,gBAAItG,SAASC,gBAAT,CAA0BK,OAA9B,EAAuC;AACrC,qBAAO+F,aAAaC,gBAAgB,CAA7B,CAAP;AACD;;AAED;AACA;AACA;AACAhV,kBAAMqF,KAAN,GAAc8P,oBAAd,CAAmC;AACjCpF,8BAAgBtB,YAAYhO,IAAZ,CAAiBsP;AADA,aAAnC,EAEG,UAACnK,GAAD,EAAMwP,UAAN,EAAqB;AACtB,kBAAIxP,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACT8I,uBAASC,gBAAT,CAA0BK,OAA1B,GAAoCoG,WAAWC,wBAA/C;AACA;AACAD,yBAAWC,wBAAX,CAAoC5S,OAApC,CAA4C,kBAAU;AACpD;AACA;AACA,oBAAIiO,WAAWrD,MAAMpK,QAAN,CAAe/C,MAAM6B,QAArB,EAA+BkN,OAAOC,MAAP,CAAcC,EAA7C,CAAf;AACAsF,oBAAI1D,QAAJ,CAAaL,QAAb;AACD,eALD,EAJsB,CASnB;AACH,qBAAOqE,aAAaC,gBAAgB,CAA7B,CAAP;AACD,aAbD,EA1BwC,CAuCrC;AACJ,WAxCD,EAToC,CAiDjC;AACJ,SAlDD,EAkDG,CAlDH,EARgB,CA0DV;AACP,OA7DD,EA7BuB,CA0FpB;AACJ,KA3FD,EA2FG,CA3FH,EAJqD,CA+F/C;AACP,GAhGD,EAhByD,CAgHtD;AACJ;;AAED,SAASM,oBAAT,CAA8BjH,gBAA9B,EAAgD3I,QAAhD,EAA0D;AACxD,MAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,0BAAZ;;AAEX;AACAxC,QAAMqF,KAAN,GAAckQ,oBAAd,CAAmC,EAAnC,EAAuC,UAAC3P,GAAD,EAAMnF,IAAN,EAAe;AACpD,QAAImF,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET;AACAnF,SAAK+U,YAAL,CAAkB/S,OAAlB,CAA0B,eAAO;AAC/B;AACA,UAAIgT,KAAKpI,MAAMpK,QAAN,CAAe/C,MAAMmC,SAArB,EAAgCgO,IAAI3H,eAApC,EAAqD2H,GAArD,CAAT;;AAEA;AACA,UAAIgB,MAAMhE,MAAMpK,QAAN,CAAe/C,MAAM0B,GAArB,EAA0ByO,IAAIhI,KAA9B,CAAV;AACAgJ,UAAIN,QAAJ,CAAa0E,EAAb;AACD,KAPD;AAQAhG,4BAAwB,IAAxB;AACA,WAAO/J,SAAS,IAAT,CAAP;AACD,GAdD;AAeD;;AAED;;;AAGA,SAASgQ,gCAAT,CAA0CC,OAA1C,EAAmDjQ,QAAnD,CAA2D,iCAA3D,EAA8F;AAC5F,MAAIiD,cAAcgN,QAAQlV,IAAR,CAAakI,WAA/B;AACA,MAAIgH,KAAJ,EAAWpN,QAAQC,GAAR,uDAAgEmG,WAAhE;AACX,MAAIiN,uBAAuB,EAA3B,CAH4F,CAG5D;AAChC5V,QAAMuF,GAAN,GAAYsQ,sBAAZ,CAAmC;AACjCF,aAAShN;AADwB,GAAnC,EAEG,UAAS/C,GAAT,EAAckQ,qBAAd,EAAqC;AACtC,QAAIlQ,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACT,QAAIkQ,sBAAsBC,qBAAtB,CAA4C5U,MAA5C,IAAsD,CAA1D,EAA6D;AAC3D,aAAOuE,SAAS,IAAT,EAAekQ,oBAAf,CAAP;AACD;AACD,QAAIlJ,SAAS;AACXiJ,eAAShN,WADE;AAEXqN,0BAAoBF,sBAAsBC;AAF/B,KAAb;AAIA,QAAIpG,KAAJ,EAAWpN,QAAQC,GAAR,sDAA+DmG,WAA/D,UAA+EmN,sBAAsBC,qBAAtB,CAA4C5U,MAA3H;AACXnB,UAAMuF,GAAN,GAAY0Q,0BAAZ,CAAuCvJ,MAAvC,EAA+C,UAAS9G,GAAT,EAAcsQ,oBAAd,EAAoC;AACjF,UAAItQ,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET;AACA;AACAsQ,2BAAqBF,kBAArB,CAAwCvT,OAAxC,CAAgD,UAAS0T,YAAT,EAAuB;AACrE,YAAIzF,WAAWV,iBAAiBmG,aAAaC,aAA9B,CAAf;AACAT,gBAAQ5E,QAAR,CAAiBL,QAAjB;;AAEA;AACAkF,6BAAqBO,aAAaE,oBAAlC,IAA0D3F,QAA1D;AACD,OAND,EALiF,CAW7E;AACJ,aAAOhL,SAAS,IAAT,EAAekQ,oBAAf,CAAP;AACD,KAbD,EAVsC,CAuBnC;AACJ,GA1BD,EAJ4F,CA8BzF;AACJ,E,CAAC;;AAEF;;;;;AAKA,SAASU,sBAAT,CAAgCX,OAAhC,EAAyCjQ,QAAzC,CAAiD,WAAjD,EAA8D;AAC5D,MAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,+CAAwDmT,QAAQlV,IAAR,CAAakI,WAArE;;AAEX,MAAIA,cAAcgN,QAAQlV,IAAR,CAAakI,WAA/B;AACA,MAAI4N,aAAaZ,QAAQlV,IAAR,CAAa8V,UAA9B;AACAvW,QAAMuF,GAAN,GAAYiR,YAAZ,CAAyB;AACvBb,aAAShN;AADc,GAAzB,EAEG,UAAS/C,GAAT,EAAc6Q,eAAd,EAA+B;AAChC,QAAI7Q,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACT,QAAI6Q,gBAAgBC,WAAhB,CAA4BvV,MAA5B,KAAuC,CAA3C,EAA8C;AAC5C,aAAOuE,SAAS,IAAT,CAAP;AACD;AACD,QAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,6BAAZ;AACXxC,UAAMuF,GAAN,GAAYoR,gBAAZ,CAA6B;AAC3BC,gBAAUH,gBAAgBC,WADC;AAE3Bf,eAASY;AAFkB,KAA7B,EAGG,UAAS3Q,GAAT,EAAciR,kBAAd,EAAkC;AACnC,UAAIjR,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET;AACA;AACAiR,yBAAmBD,QAAnB,CAA4BnU,OAA5B,CAAoC,sBAAc;;AAEhD;AACA;AACA,YAAIqU,UAAUzJ,MAAMpK,QAAN,CAAe/C,MAAM0H,OAArB,EAA8BmP,WAAWnO,WAAzC,EAAsDmO,UAAtD,CAAd;AACApB,gBAAQ5E,QAAR,CAAiB+F,OAAjB;;AAEA;AACAC,mBAAWC,aAAX,CAAyBvU,OAAzB,CAAiC,cAAM;AACrC,cAAIgT,KAAK7F,qBAAqBqH,GAAGC,cAAxB,CAAT;AACA,cAAIzB,EAAJ,EAAQ;AACNA,eAAG1E,QAAH,CAAY+F,OAAZ;AACA;AACD,WAHD,MAGO;AACLvU,oBAAQC,GAAR,qBAA8BsU,QAAQvW,GAAtC,wCAA4E0W,GAAGC,cAA/E;AACD;AACF,SARD,EARgD,CAgB5C;AACL,OAjBD,EALmC,CAsB/B;AACJ,aAAOxR,SAAS,IAAT,CAAP;AACD,KA3BD,EANgC,CAiC5B;AACL,GApCD,EAL4D,CAyCxD;AACL,C,CAAA;;AAED;;;AAGA,SAASyR,mBAAT,CAA6BxO,WAA7B,EAA0CjD,QAA1C,CAAkD,2BAAlD,EAA+E;AAC7E,MAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,yCAAkDmG,WAAlD;AACX3I,QAAMuF,GAAN,GAAY6R,SAAZ,CAAsB;AACpBzB,aAAShN;AADW,GAAtB,EAEG,UAAS/C,GAAT,EAAcyR,QAAd,EAAwB;AACzB,QAAIzR,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACT;AACA,QAAIyR,SAASC,QAAT,CAAkBnW,MAAlB,KAA6B,CAAjC,EAAoC;AAClC,aAAOuE,SAAS,IAAT,EAAe,EAAf,CAAP,CADkC,CACN;AAC7B;AACD,QAAIgH,SAAS;AACX6K,aAAOF,SAASC,QADL;AAEX3B,eAAShN;AAFE,KAAb;AAIA,QAAIgH,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,wBAAZ;AACXxC,UAAMuF,GAAN,GAAYiS,aAAZ,CAA0B9K,MAA1B,EAAkC,UAAS9G,GAAT,EAAc6R,eAAd,EAA+B;AAC/D,UAAI7R,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET;AACA,aAAOF,SAAS,IAAT,EAAe+R,gBAAgBF,KAA/B,CAAP;AACD,KALD,EAXyB,CAgBrB;AACL,GAnBD,EAF6E,CAqBzE;AACL;;AAED,SAASG,gBAAT,CAA0BhS,QAA1B,EAAoC;AAClC,MAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,sBAAZ;;AAEX;AACA;AACA,MAAI,CAACgN,sBAAL,EAA6B;AAC3BjN,YAAQC,GAAR,CAAY,iEAAZ;AACAD,YAAQC,GAAR,CAAY,4DAAZ;AACD;AACD,MAAI,CAACiN,qBAAL,EAA4B;AAC1BlN,YAAQC,GAAR,CAAY,gEAAZ;AACAD,YAAQC,GAAR,CAAY,2DAAZ;AACD;AACD,MAAI,CAACkN,kBAAL,EAAyB;AACvBnN,YAAQC,GAAR,CAAY,6DAAZ;AACAD,YAAQC,GAAR,CAAY,uDAAZ;AACD;;AAED,MAAIqH,WAAW,SAAXA,QAAW,CAAC7G,IAAD,EAAU;AACvB,QAAIV,OAAO,EAAX;AACA,QAAI8D,OAAOpD,KAAKkF,OAAL,CAAa,MAAb,CAAX;AACA,QAAI9B,IAAJ,EAAU;AACR9D,cAAQ,aAAa8D,IAAb,GAAoB,IAA5B;AACD;AACD,WAAO9D,IAAP;AACD,GAPD;;AASA;;;;;AAKA,MAAIqN,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,8BAAZ;AACXxC,QAAMuF,GAAN,GAAYoS,YAAZ,CAAyB,EAAzB,EAA8B,UAAS/R,GAAT,EAAcgS,WAAd,EAA2B;AACvD,QAAIhS,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACT,QAAI+J,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,6BAAZ;AACXxC,UAAMuF,GAAN,GAAYsS,gBAAZ,CAA6B;AAC3BC,gBAAUF,YAAYG;AADK,KAA7B,EAEG,UAASnS,GAAT,EAAcoS,kBAAd,EAAkC;AACnC,UAAIpS,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET;;AAEA;AACA,OAAC,SAASqS,WAAT,CAAqBtT,KAArB,EAA4B;AAC3B;AACA,YAAIA,SAASqT,mBAAmBF,QAAnB,CAA4B3W,MAAzC,EAAiD;AAC/C,iBAAOuE,SAAS,IAAT,CAAP;AACD;;AAED;AACA,YAAIwS,aAAaF,mBAAmBF,QAAnB,CAA4BnT,KAA5B,CAAjB;AACA,YAAIgR,UAAUtI,MAAMpK,QAAN,CAAe/C,MAAMyH,OAArB,EAA8BuQ,WAAWvP,WAAzC,EAAsDuP,UAAtD,CAAd;AACA3V,gBAAQC,GAAR,CAAY,iBAAiB0V,WAAWvP,WAAxC;;AAEA;;;AAGA+M,yCAAiCC,OAAjC,EAA0C,UAAC/P,GAAD,EAAMgQ,oBAAN,EAA+B;AACvE,cAAIhQ,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAEP0Q,iCAAuBX,OAAvB,EAAgC,UAAC/P,GAAD,EAAS;AACvC,gBAAIA,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAEPuR,gCAAoBe,WAAWvP,WAA/B,EAA4C,UAAC/C,GAAD,EAAM6R,eAAN,EAA0B;AACpE,kBAAI7R,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAEP;AACA;AACA6R,8BAAgBhV,OAAhB,CAAwB,mBAAW;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAI0V,MAAMC,QAAQC,iBAAR,CAA0BC,WAA1B,CAAsC,GAAtC,CAAV;AACA,oBAAIC,WAAWH,QAAQC,iBAAR,CAA0BzR,SAA1B,CAAoCuR,MAAM,CAA1C,CAAf;AACAA,sBAAMI,SAASD,WAAT,CAAqB,GAArB,CAAN;AACAC,2BAAWA,SAAS3R,SAAT,CAAmB,CAAnB,EAAsBuR,GAAtB,CAAX;AACA;;AAEA;AACA;AACA,oBAAIK,eAAe7C,OAAnB;AACA,oBAAIyC,QAAQK,SAAZ,EAAuB;AACrB;AACA9C,0BAAQjV,QAAR,CAAiB+B,OAAjB,CAAyB,UAASiW,QAAT,EAAmB;AAC1C,wBAAIhW,QAAQ2K,MAAMtK,WAAN,CAAkB2V,QAAlB,CAAZ;AACA,wBAAIhW,MAAMrC,IAAN,KAAeH,MAAM0H,OAAzB,EAAkC;AAChC,0BAAIkP,UAAUpU,KAAd;AACA,0BAAIiW,cAAc7B,QAAQrW,IAAR,CAAakY,WAA/B;AACA,2BAAK,IAAIC,MAAM,CAAf,EAAkBA,MAAMD,YAAYxX,MAApC,EAA4CyX,KAA5C,EAAmD;AACjD,4BAAID,YAAYC,GAAZ,EAAiBtY,EAAjB,KAAwB8X,QAAQK,SAApC,EAA+C;AAC7C;AACA;AACAD,yCAAe1B,OAAf;AACA;AACD;AACF,uBAV+B,CAU/B;AACF,qBAbyC,CAazC;AACF,mBAdD,EAFqB,CAgBnB;AACH,iBAlCgC,CAkChC;;AAED;AACA,oBAAI+B,OAAOxL,MAAMpK,QAAN,CAAe/C,MAAM2H,IAArB,EAA2B0Q,QAA3B,EAAqCH,OAArC,CAAX;AACAI,6BAAazH,QAAb,CAAsB8H,IAAtB;;AAEA;AACA,oBAAInI,WAAWkF,qBAAqBwC,QAAQ/B,oBAA7B,CAAf;AACA,oBAAI3F,QAAJ,EAAc;AACZmI,uBAAK9H,QAAL,CAAcL,QAAd;AACD,iBAFD,MAEO;AACLnO,0BAAQC,GAAR,kBAA2B4V,QAAQU,OAAnC,6CAAkFV,QAAQ/B,oBAA1F;AACD;AAEF,eAhDD,EALkE,CAqD9D;;AAEJ,qBAAO4B,YAAYtT,QAAQ,CAApB,CAAP;AACH,aAxDD,EAHqC,CA2DjC;AACP,WA5DD,EAHqE,CA+DjE;AACP,SAhED,EAd2B,CA8EvB;AACL,OA/ED,EA+EG,CA/EH,EANmC,CAqF5B;AACR,KAxFD,EAHuD,CA2FnD;AACL,GA5FD,EAjCkC,CA6H9B;AACL;;AAED,SAASoU,iBAAT,CAA2BrT,QAA3B,EAAqC;AACnC,MAAIiK,KAAJ,EAAWpN,QAAQC,GAAR,CAAY,uBAAZ;;AAEX;AACAxC,QAAMwF,GAAN,GAAYwT,mBAAZ,CAAgC,EAAhC,EAAoC,UAACpT,GAAD,EAAMnF,IAAN,EAAe;AACjD,QAAImF,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET;AACAnF,SAAKwY,WAAL,CAAiBxW,OAAjB,CAAyB,eAAO;AAC9B;AACA,UAAIyW,KAAK7L,MAAMpK,QAAN,CAAe/C,MAAM4H,QAArB,EAA+BuI,IAAIhB,oBAAnC,EAAyDgB,GAAzD,CAAT;;AAEAA,UAAI8I,iBAAJ,CAAsB1W,OAAtB,CAA8B,iBAAS;AACrC,YAAI+O,KAAKnE,MAAMpK,QAAN,CAAe/C,MAAMyB,MAArB,EAA6ByX,MAAMC,kBAAnC,CAAT;AACA7H,WAAGT,QAAH,CAAYmI,EAAZ;AACD,OAHD;AAIA,UAAIhI,KAAK7D,MAAMpK,QAAN,CAAe/C,MAAMmH,EAArB,EAAyBgJ,IAAIY,gBAA7B,CAAT;AACAC,SAAGH,QAAH,CAAYmI,EAAZ;;AAEA;AACA;AACA;AACD,KAdD;AAeAzJ,4BAAwB,IAAxB;AACA,WAAO/J,SAAS,IAAT,CAAP;AACD,GArBD;AAsBD;;AAED;AACA,SAASyH,kBAAT,CAA4B3L,MAA5B,EAAoC6M,gBAApC,EAAsD3I,QAAtD,CAA8D,WAA9D,EAA2E;AACzEnD,UAAQC,GAAR,CAAY,sBAAZ;AACAD,UAAQC,GAAR,gBAAyBhB,MAAzB,UAAoCxB,MAAMiG,iBAAN,CAAwBzE,MAAxB,CAApC;;AAEAxB,QAAMyG,cAAN,CAAqBjF,MAArB;;AAEA;AACA6L,QAAMvK,KAAN;AACA+O,yBAAuB,eAAO;AAC5B,QAAIjM,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACTsK,iBAAa,eAAO;AAClB,UAAItK,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACT6L,sBAAgB,eAAO;AACrB,YAAI7L,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACToM,4BAAoB,eAAO;AACzB,cAAIpM,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACT0M,mCAAyB,eAAO;AAC9B,gBAAI1M,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACT0K,8BAAkB,eAAO;AACvB,kBAAI1K,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACTgN,gCAAkB,eAAO;AACvB,oBAAIhN,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACTmN,0CAA0B,eAAO;AAC/B,sBAAInN,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACTuN,mCAAiB,eAAO;AACtB,wBAAIvN,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACT0N,8CAA0B,eAAO;AAC/B,0BAAI1N,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACT5F,4BAAMyF,eAAN,CAAsB,eAAO;AAC3B,4BAAIG,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACTiO,4CAAoB,eAAO;AACzB,8BAAIjO,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACT0P,+CAAqBjH,gBAArB,EAAuC,eAAO;AAAE;AAC9C,gCAAIzI,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACTyO,kDAAsBhG,gBAAtB,EAAwC,eAAO;AAC7C,kCAAIzI,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACT8R,+CAAiB,eAAO;AACtB,oCAAI9R,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;AACTmT,kDAAkB,eAAO;AACvB,sCAAInT,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAETrD,0CAAQC,GAAR,CAAY,iCAAZ;AACA,yCAAOkD,SAAS,IAAT,CAAP;AACD,iCALD;AAMD,+BARD;AASD,6BAXD;AAYD,2BAdD;AAeD,yBAjBD;AAkBD,uBApBD;AAqBD,qBAvBD;AAwBD,mBA1BD;AA2BD,iBA7BD;AA8BD,eAhCD;AAiCD,aAnCD;AAoCD,WAtCD;AAuCD,SAzCD;AA0CD,OA5CD;AA6CD,KA/CD;AAgDD,GAlDD;AAmDD;;AAEDjB,OAAOC,OAAP,CAAe4L,iBAAf,GAAmCA,iBAAnC;AACA7L,OAAOC,OAAP,CAAewL,YAAf,GAA8BA,YAA9B;AACAzL,OAAOC,OAAP,CAAe+M,eAAf,GAAiCA,eAAjC;AACAhN,OAAOC,OAAP,CAAesN,mBAAf,GAAqCA,mBAArC;AACAvN,OAAOC,OAAP,CAAe4N,wBAAf,GAA0CA,wBAA1C;AACA7N,OAAOC,OAAP,CAAekO,iBAAf,GAAmCA,iBAAnC;AACAnO,OAAOC,OAAP,CAAeqO,yBAAf,GAA2CA,yBAA3C;AACAtO,OAAOC,OAAP,CAAeyO,gBAAf,GAAkCA,gBAAlC;AACA1O,OAAOC,OAAP,CAAe4O,yBAAf,GAA2CA,yBAA3C;AACA7O,OAAOC,OAAP,CAAemP,mBAAf,GAAqCA,mBAArC;AACApP,OAAOC,OAAP,CAAe2P,qBAAf,GAAuCA,qBAAvC;AACA5P,OAAOC,OAAP,CAAe4Q,oBAAf,GAAsCA,oBAAtC;AACA7Q,OAAOC,OAAP,CAAegT,gBAAf,GAAkCA,gBAAlC;AACAjT,OAAOC,OAAP,CAAeqU,iBAAf,GAAmCA,iBAAnC;AACAtU,OAAOC,OAAP,CAAeyI,kBAAf,GAAoCA,kBAApC,C;;;;;;ACx4BA1I,OAAOC,OAAP,GAAiB;AACf;;;AAGA4U,QAAM;AACJC,WAAO,SADH;AAEJC,UAAM,CACJ,EAAEC,SAAS,OAAX,EADI,EAEJ,EAAC,cAAc,iBAAf,EAAkCC,SAAS,SAA3C,EAFI,EAEkD;AACtD,MAAEtT,MAAM,UAAR,EAAoBsT,SAAS,qCAA7B,EAHI,EAIJ,EAAEC,KAAK,aAAP,EAAsBvT,MAAM,aAA5B,EAA2CsT,SAAS,iBAApD,EAJI,CAFF;AAQJE,SAAK;AACH;AADG,KARD;AAWJhL,UAAM,CACJ,EAAEiL,KAAK,MAAP,EAAexZ,MAAM,WAArB,EAAkCyZ,MAAM,cAAxC,EADI,EAEJ,EAAED,KAAK,YAAP,EAAqBC,MAAM,kDAA3B,EAFI,CAXF;AAeJhO,WAAO;AACLiO,kBAAY;AADP;AAfH,GAJS;AAuBf;;;AAGAH,OAAK,CACH,wBADG,EAEH,6CAFG,CA1BU;AA8BfI,WAAS;AACPC,WAAO;AADA,GA9BM;AAiCf;;;AAGAnO,SAAO;AACLoO,YAAQ,CAAC,OAAD,EAAU,KAAV,EAAiB,QAAjB,CADH;AAEL;;;AAGAC,UALK,kBAKGzO,MALH,EAKW0O,GALX,EAKgB;AACnB,UAAIA,IAAIC,QAAR,EAAkB;AAChB3O,eAAOjH,MAAP,CAAc6V,KAAd,CAAoBvZ,IAApB,CAAyB;AACvBwZ,mBAAS,KADc;AAEvBC,gBAAM,aAFiB;AAGvBC,kBAAQ,eAHe;AAIvBC,mBAAS;AAJc,SAAzB;AAMD;AACF,KAdI;;AAeLC,aAAS;AACNC,eAAS;AACP,qCAA6B;AADtB;AADH;AAfJ,GApCQ;AAyDfC,WAAS;AACP;AACA,cAFO;AAzDM,CAAjB,C","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3303aa278a858e76b830","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 0\n// module chunks = 0","const myAWS = require('./myAWS')\nconst types = require('../../lib/types')\n\nvar nodeIndex = [ ]; // key -> AWSNode\n\n\nclass AWSNode {\n\n  constructor(type, id) {\n    // console.log('AWSNode.constructor()');\n    this.type = type\n    this.id = id\n    this.key = keyForNode(type, id)\n    this.data = null\n    this.children = [ ]\n    this.parents = [ ]\n    this.describeFn = null\n  }\n\n  setData(data) {\n    this.data = data\n  }\n\n  setDescribe(fn) {\n    // this.describeFn = fn\n  }\n\n  addChild(childNode) {\n    if (childNode != null) {\n      // console.log('WOOP ' + this.key + ' => ' + childNode.key)\n      this.children.push(childNode.key)\n      childNode.parents.push(this.key)\n    }\n  }\n\n  findTag(tagname) {\n    // Assumes this.data.Tags\n    if (this.data && this.data.Tags) {\n      for (var i = 0; i < this.data.Tags.length; i++) {\n        let tag = this.data.Tags[i]\n        if (tag.Key === tagname) {\n          return tag.Value\n        }\n      }\n    }\n    return null\n  }\n\n  awsLink() {\n    let ec2Home = 'https://' + myAWS.region() + '.console.aws.amazon.com/ec2/v2/home?region=' + myAWS.region()\n    let vpcHome = 'https://' + myAWS.region() + '.console.aws.amazon.com/vpc/home?region=' + myAWS.region()\n    switch (this.type) {\n      case types.SUBNET:\n        return vpcHome + '#subnets:filter=' + this.id\n      case types.SECGRP:\n        return ec2Home + '#SecurityGroups:groupId=' + this.id\n      case types.VPC:\n        return vpcHome + '#vpcs:filter=' + this.id\n      case types.NAT:\n        return vpcHome + '#NatGateways:search=' + this.id + ';sort=natGatewayId'\n      case types.IGW:\n        return vpcHome + '#igws:filter=' + this.id\n      case types.INSTANCE:\n        return ec2Home + '#Instances:search=' + this.id\n      // case types.IMAGE = 'AMI Image'\n      // case types.AZ = 'Availability Zone'\n      case types.ADDR:\n        return ec2Home + '#Addresses:search=' + this.id\n      // case types.COSTCD = 'Cost Code'\n      // case types.LOGICAL = 'Logical Grouping'\n      // case types.PUBLICIP = 'Public IP Address'\n      case types.KEYPAIR:\n        return ec2Home + '#KeyPairs:search=' + this.id\n      case types.NETIFACE:\n        return ec2Home + '#NIC:networkInterfaceId=' + this.id\n      case types.ROUTETABLE:\n        return vpcHome + '#routetables:filter=' + this.id\n      case types.ALB:\n        return ec2Home + '#LoadBalancers:search=' + this.id\n      case types.TARGETGRP:\n        return ec2Home + '#TargetGroups:search=' + this.id\n      default:\n        return null\n    }\n  }\n\n  dump() {\n    if (this.describeFn) {\n      let desc = this.describeFn(this)\n      if (desc) {\n        console.log(desc);\n      }\n    } else {\n      console.log('Id: ' + this.id)\n    }\n    // console.log(' - children:', this.children)\n    this.children.forEach(child => {\n      // console.log('  ->', child)\n      console.log('  - ' + child.id)\n    })\n  }\n\n  findEnvironment() {\n    let environment = null\n    if (this.data && this.data.Tags) {\n      this.data.Tags.forEach(tag => {\n        if (tag.Key.toLowerCase() === 'environment') {\n          environment = tag.Value;\n          // console.log(`environment is [${environment}]`);\n        }\n      })\n    }\n    return environment;\n  }\n\n  label() {\n    let label = null\n    if (this.data) {\n      if (this.data.Tags) {\n        this.data.Tags.forEach(tag => {\n          if (tag.Key.toLowerCase() === 'name') {\n            label = tag.Value;\n          }\n        })\n      }\n      if (!label && this.data['Key']) {\n        label = this.data['Key']\n      }\n    }\n    if (!label) {\n      label = this.id\n    }\n    return label\n  }//- label()\n\n}//- class AWSNode\n\nfunction reset() {\n  nodeIndex = [ ]\n}\n\nfunction keyForNode(type, id) {\n  return type + '::' + id\n}\n\nfunction nodeWithKey(key) {\n  let node = nodeIndex[key]\n  return node\n}\n\nfunction findNode(type, id, data, describeFn) {\n  // if (type === types.INSTANCE) {\n  //   console.log(`****** INSTANCE ${id}, data=`, data);\n  // }\n\n  let key = keyForNode(type, id)\n  let node = nodeIndex[key]\n  if (!node) {\n    node = new AWSNode(type, id)\n    nodeIndex[key] = node\n  }\n  if (data) {\n    node.setData(data)\n  }\n  if (describeFn) {\n    console.log(`\\n\\nWARNING: findNode(${type}) called with describeFn`);\n    node.setDescribe(describeFn)\n  }\n  return node\n}\n\nfunction dumpAll() {\n  console.log('dumpAll');\n  // console.log('nodeIndex=', nodeIndex);\n  for (var key in nodeIndex) {\n    console.log('')\n    // console.log('key: ' + key);\n    let node = nodeIndex[key]\n    node.dump()\n  }\n}\n\nfunction getIndex() {\n  return nodeIndex;\n}\n\nfunction getKeys() {\n  var keys = [ ];\n  for (var key in nodeIndex) {\n    keys.push(key);\n  }\n  return keys;\n}\n\nfunction getNodes() {\n  var nodes = [ ];\n  for (var key in nodeIndex) {\n    let node = nodeIndex[key]\n    nodes.push(node);\n  }\n  return nodes;\n}\n\nfunction nodesByType(type) {\n  // console.log('nodesByType(' + type + ')');\n  let arr = getNodes().filter(node => node.type === type);\n  return sortAlphabetic(arr)\n}\n\nfunction sortAlphabetic(arr) {\n  let sorted = arr.sort((a,b) => {\n\n    // Sort by environment first\n    let env1 = a.findEnvironment()\n    if (!env1) env1 = 'zzzzzzzzzz';\n    let env2 = b.findEnvironment()\n    if (!env2) env2 = 'zzzzzzzzzz';\n    if (env1 < env2) {\n      return -1\n    } else if (env1 > env2) {\n      return 1\n    }\n\n    // Sort by name\n    if (a.id < b.id) {\n      return -1\n    } else if (a.id > b.id) {\n      return 1\n    }\n    return 0\n  })\n  return sorted\n}\n\n// function downloadRegion(region, withHealthchecks, callback) {\n//   console.log(`graph.downloadRegion(${region}, ${withHealthchecks})`);\n//   download.downloadEverything(region, withHealthchecks, callback);\n// }\n\n/*\n *  Return a list of environments\n */\nfunction environments() {\n  // Get unique environments\n  var map = [ ];\n  getNodes().forEach(node => {\n    var environment = node.findEnvironment()\n    if (environment) {\n      map[environment] = environment\n    }\n  });\n  // Create a list\n  var list = [ ];\n  for (var key in map) {\n    list.push(key);\n  }\n  // Sort the list\n  list.sort((a,b) => {\n    if (a < b) {\n      return -1\n    } else if (a > b) {\n      return +1\n    } else {\n      return 0\n    }\n  })\n  return list;\n}\n\n// Constants\n// module.exports.SUBNET = SUBNET;\n// module.exports.SECGRP = types.SECGRP;\n// module.exports.VPC = types.VPC;\n// module.exports.NAT = types.NAT;\n// module.exports.IGW = types.IGW;\n// module.exports.INSTANCE = types.INSTANCE;\n// module.exports.JUMPBOX = types.JUMPBOX;\n// module.exports.IMAGE = types.IMAGE;\n// module.exports.AZ = types.AZ;\n// module.exports.ADDR = types.ADDR;\n// module.exports.COSTCD = types.COSTCD;\n// module.exports.LOGICAL = types.LOGICAL;\n// module.exports.PUBLICIP = types.PUBLICIP;\n// module.exports.KEYPAIR = types.KEYPAIR;\n// module.exports.NETIFACE = types.NETIFACE;\n// module.exports.ROUTETABLE = types.ROUTETABLE;\n// module.exports.ALB = types.ALB;\n// module.exports.TARGETGRP = types.TARGETGRP;\n// module.exports.LISTENER = types.LISTENER;\n// module.exports.RULE = types.RULE;\n// module.exports.CLUSTER = types.CLUSTER;\n// module.exports.SERVICE = types.SERVICE;\n// module.exports.TASK = types.TASK;\n\n// Functions\n// module.exports.downloadRegion = downloadRegion;\nmodule.exports.findNode = findNode;\nmodule.exports.nodeWithKey = nodeWithKey;\nmodule.exports.dumpAll = dumpAll;\nmodule.exports.keyForNode = keyForNode;\nmodule.exports.reset = reset;\nmodule.exports.index = getIndex;\nmodule.exports.keys = getKeys;\nmodule.exports.nodes = getNodes;\nmodule.exports.nodesByType = nodesByType;\nmodule.exports.environments = environments;\n\n\n\n// WEBPACK FOOTER //\n// ./server/misc/graph.js","const AWS = require('aws-sdk')\nconst awsRegions = require('aws-regions')\nconst pad = require('./util').pad\n\nconst INITIAL_REGION = 'ap-northeast-1'\nvar regions = [ ]\nvar currentRegion = INITIAL_REGION\n// var currentRegion = null\nvar awsRegion = null // Region we are currently looking at\n\nvar cloudformation = null\nvar ec2 = null\nvar elbv2 = null\nvar autoscaling = null\nvar ecs = null\nvar rds = null\n\nfunction downloadRegions (callback) {\n  console.log('  downloadRegions()')\n  ec2.describeRegions({}, (err, data) => {\n    if (err) return callback(err)\n\n    regions = data.Regions // Global variable\n    // console.log('regions=', regions);\n    regions = regions.sort((r1, r2) => {\n      if (r1.RegionName < r2.RegionName) {\n        return -1\n      } else if (r1.RegionName > r2.RegionName) {\n        return +1\n      }\n      return 0\n    })\n    return callback(null)\n  })\n}\n\n// Return the name of an AWS regions\n// e.g. us-east-1 -> (n-virginia)\nfunction regionDescription (regionCode) {\n  // console.log('regionDescription(' + regionCode + ')')\n  let region = awsRegions.get(regionCode)\n  if (region) {\n    // return '(' + region.name + ')'\n    return region.name\n  }\n  return ''\n}\n\nfunction showRegions () {\n  for (let name in awsRegions.regions) {\n    let r = awsRegions.regions[name]\n    if (r.public) {\n      console.log(`${pad(name, 15)}  ${r.code}`)\n    }\n  }\n}\n\nfunction checkAwsRegion (region) {\n  // console.log(`checkAwsRegion(${region})`)\n\n  if (!region) {\n    // Default region\n    region = INITIAL_REGION\n  }\n\n  // Perhaps we are asking for a region list\n  // console.log('regions = ', awsRegions);\n  if (region === '?' || region === 'list' || region === 'unknown') {\n    showRegions()\n    process.exit(0)\n  }\n\n  // See if a place name is used\n  for (var name in awsRegions.regions) {\n    if (region.toLowerCase() === name.substring(0, region.length)) {\n      region = awsRegions.regions[name].code\n      break\n    }\n  }\n\n  // Check the code.\n  let r = awsRegions.get(region)\n  if (!r) {\n    console.log('ERROR: Unknown region ' + region)\n    process.exit(1)\n  }\n\n  if (awsRegion !== region) {\n    // console.log('switching to region ' + region);\n    // Access the different region\n    awsRegion = currentRegion = region\n    cloudformation = new AWS.CloudFormation({\n      apiVersion: '2011-01-01',\n      region: currentRegion\n    })\n    ec2 = new AWS.EC2({\n      apiVersion: '2016-11-15',\n      region: currentRegion\n    })\n    elbv2 = new AWS.ELBv2({\n      apiVersion: '2015-12-01',\n      region: currentRegion\n    })\n    autoscaling = new AWS.AutoScaling({\n      apiVersion: '2011-01-01',\n      region: currentRegion\n    })\n    ecs = new AWS.ECS({\n      apiVersion: '2014-11-13',\n      region: currentRegion\n    })\n    rds = new AWS.RDS({\n      apiVersion: '2014-10-31',\n      region: currentRegion\n    })\n  }\n\n  return currentRegion\n}\n\nmodule.exports.cloudformation = function () {\n  return cloudformation\n}\n\nmodule.exports.ec2 = function () {\n  return ec2\n}\n\nmodule.exports.ecs = function () {\n  return ecs\n}\n\nmodule.exports.rds = function () {\n  return rds\n}\n\nmodule.exports.elbv2 = function () {\n  return elbv2\n}\n\nmodule.exports.autoscaling = function () {\n  return autoscaling\n}\n\nmodule.exports.region = function () {\n  return currentRegion\n}\n\nmodule.exports.regions = function () {\n  return regions\n}\nmodule.exports.checkAwsRegion = checkAwsRegion\nmodule.exports.regionDescription = regionDescription\nmodule.exports.downloadRegions = downloadRegions\n\nmodule.exports.INITIAL_REGION = INITIAL_REGION\n\n\n\n// WEBPACK FOOTER //\n// ./server/misc/myAWS.js","// AWS Node types\nmodule.exports.SUBNET = 'Subnet'\nmodule.exports.SECGRP = 'Security Group'\nmodule.exports.VPC = 'Virtual Private Cloud'\nmodule.exports.NAT = 'NAT Gateway'\nmodule.exports.IGW = 'Internet Gateway'\nmodule.exports.INSTANCE = 'EC2 Instance' // may have node.data._isJumpbox set\nmodule.exports.IMAGE = 'AMI Image'\nmodule.exports.AZ = 'Availability Zone'\nmodule.exports.ADDR = 'Elastic IP'\nmodule.exports.COSTCD = 'Cost Code'\nmodule.exports.LOGICAL = 'Logical Grouping'\nmodule.exports.PUBLICIP = 'Public IP Address'\nmodule.exports.KEYPAIR = 'Key Pair'\nmodule.exports.NETIFACE = 'Network Interface'\nmodule.exports.ROUTETABLE = 'Route Table'\nmodule.exports.ALB = 'Load Balancer'\nmodule.exports.TARGETGRP = 'Target Group'\nmodule.exports.LISTENER = 'Listener'\nmodule.exports.RULE = 'Rule'\nmodule.exports.CLUSTER = 'Cluster'\nmodule.exports.SERVICE = 'Service'\nmodule.exports.TASK = 'Task'\nmodule.exports.DATABASE = 'Database'\nmodule.exports.CACHE = 'Cache'\n\nfunction descriptionFunctions (node) {\n  switch (node.type) {\n    case module.exports.SUBNET: return require('./types/subnet')\n    case module.exports.ROUTETABLE: return require('./types/routeTable')\n    case module.exports.ALB: return require('./types/loadBalancer')\n    case module.exports.DATABASE: return require('./types/database')\n\n    default:\n      return null\n  }\n}\n\nmodule.exports.id = function (node) {\n  if (!node.data) {\n    return '-'\n  }\n\n  let fns = descriptionFunctions(node)\n  if (fns && fns.id) {\n    return fns.id(node, { findTag, types: module.exports })\n  }\n\n  switch (node.type) {\n    case this.SUBNET:\n      return node.data.SubnetId\n\n    case this.SECGRP:\n      return node.data.GroupId\n\n    case this.VPC:\n      return node.data.VpcId\n\n    case this.NAT:\n      return node.data ? node.data.NatGatewayId : '?'\n\n    case this.IGW:\n      return node.data.InternetGatewayId\n\n    case this.INSTANCE:\n      return node.data.InstanceId\n\n    case this.IMAGE:\n      return node.id\n\n    case this.AZ:\n      return node.id\n\n    case this.ADDR:\n      return node.data.AllocationId\n\n    case this.COSTCD:\n      return node.key\n\n    case this.LOGICAL:\n      return node.key\n\n    case this.PUBLICIP:\n      return node.id\n\n    case this.KEYPAIR:\n      return node.key\n\n    case this.NETIFACE:\n      return node.id\n\n    case this.ALB:\n      return node.id\n\n    case this.TARGETGRP:\n      return node.data.TargetGroupName\n\n    case this.LISTENER:\n      return node.key\n\n    case this.RULE:\n      return node.key\n\n    case this.CLUSTER:\n      return node.data.clusterName\n\n    case this.SERVICE:\n      return node.data.serviceName\n\n    case this.TASK:\n      return node.id\n\n    case this.CACHE:\n      return node.key\n\n    default:\n      return node.key\n  }\n}\n\nmodule.exports.label = function (node) {\n  let fns = descriptionFunctions(node)\n  if (fns && fns.label) {\n    return fns.label(node, { findTag, types: module.exports })\n  }\n\n  // let label\n  let name\n  switch (node.type) {\n    case this.SUBNET:\n      name = findTag(node, 'Name')\n      return name || node.data.SubnetId\n\n    case this.SECGRP:\n      // if (node.data.GroupName === 'default') {\n      //   // Default for the VPC\n      //   return node.data.Description\n      // }\n      name = findTag(node, 'Name')\n      return name || node.data.GroupName\n\n    case this.VPC:\n      name = findTag(node, 'Name')\n      return name || node.key\n\n    case this.NAT:\n      name = findTag(node, 'Name')\n      if (name) {\n        return name\n      }\n      if (node.data) {\n        return node.data.NatGatewayId\n      }\n      return '?'\n\n    case this.IGW:\n      return node.key\n\n    case this.INSTANCE:\n      name = findTag(node, 'Name')\n      return name || node.key\n\n    case this.IMAGE:\n      return node.key\n\n    case this.AZ:\n      return node.id\n\n    case this.ADDR:\n      return `public: ${node.data.PublicIp}`\n\n    case this.COSTCD:\n      return node.key\n\n    case this.LOGICAL:\n      return node.key\n\n    case this.PUBLICIP:\n      return node.id\n\n    case this.KEYPAIR:\n      return node.key\n\n    case this.NETIFACE:\n      return `Private IP: ${node.data.PrivateIpAddress}`\n\n    case this.ALB:\n      return node.data.LoadBalancerName\n\n    case this.TARGETGRP:\n      return node.data.TargetGroupName\n\n    case this.LISTENER:\n      return node.key\n\n    case this.RULE:\n      return node.key\n\n    case this.CLUSTER:\n      return node.data.clusterName\n\n    case this.SERVICE:\n      return node.data.serviceName\n\n    case this.TASK:\n      if (node.data.containers && node.data.containers.length > 0) {\n        return node.data.containers[0].name\n      }\n      return ' '\n\n    case this.CACHE:\n      return node.key\n\n    default:\n      return node.key\n  }\n}\n\nmodule.exports.description = function (node) {\n  let fns = descriptionFunctions(node)\n  if (fns && fns.description) {\n    return fns.description(node, { findTag, types: module.exports })\n  }\n\n  switch (node.type) {\n    case this.SECGRP:\n      return node.data.Description\n\n    case this.VPC:\n      return node.data.State\n\n    case this.NAT:\n      if (node.data) {\n        return `Public IP: ${node.data.NatGatewayAddresses[0].PublicIp}`\n      }\n      console.log('Strange, NAT node does not have data:', node)\n      return '?'\n\n    case this.IGW:\n      return node.key\n\n    case this.INSTANCE:\n      return ''\n\n    case this.IMAGE:\n      return node.key\n\n    case this.AZ:\n      return ' '\n\n    case this.ADDR:\n      return `private: ${node.data.PrivateIpAddress}`\n\n    case this.COSTCD:\n      return node.key\n\n    case this.LOGICAL:\n      return node.key\n\n    case this.PUBLICIP:\n      return ''\n\n    case this.KEYPAIR:\n      return node.key\n\n    case this.NETIFACE:\n      return ' '\n\n    case this.ALB:\n      return node.data.DNSName\n\n    case this.TARGETGRP:\n      return ' '\n\n    case this.LISTENER:\n      return node.key\n\n    case this.RULE:\n      return node.key\n\n    case this.CLUSTER:\n      return `${node.data.status.toLowerCase()}, ${node.data.registeredContainerInstancesCount} instances, ${node.data.runningTasksCount} tasks`\n\n    case this.SERVICE:\n      return `${node.data.status.toLowerCase()}, ${node.data.runningCount} running`\n\n    case this.TASK:\n      return `version ${node.data.version}, ${node.data.lastStatus.toLowerCase()}`\n\n    case this.CACHE:\n      return node.key\n\n    default:\n      return `DESCRIPTION FOR ${node.key}`\n  }\n}\n\nmodule.exports.describe = function (node) {\n  let fns = descriptionFunctions(node)\n  if (fns && fns.describe) {\n    return fns.describe(node, { findTag, types: module.exports })\n  }\n\n  switch (node.type) {\n    case this.SECGRP:\n      return describeSecurityGroup(node)\n\n    case this.VPC:\n      return describeVpc(node)\n\n    case this.NAT:\n      return node.key\n\n    case this.IGW:\n      return node.key\n\n    case this.INSTANCE:\n      return describeInstance(node)\n\n    case this.IMAGE:\n      return node.key\n\n    case this.AZ:\n      return node.key\n\n    case this.ADDR:\n      return node.key\n\n    case this.COSTCD:\n      return node.key\n\n    case this.LOGICAL:\n      return node.key\n\n    case this.PUBLICIP:\n      return `<b>Public IP Address</b><br/>${node.id}`\n\n    case this.KEYPAIR:\n      return node.key\n\n    case this.NETIFACE:\n      return node.key\n\n    case this.ALB:\n      return node.key\n\n    case this.TARGETGRP:\n      return `\n        <b>Target Group</b><br/>\n        Name: ${node.data.TargetGroupName}<br>\n        Healthcheck: ${node.data.HealthCheckPath}<br>\n        Expected reply: ${node.data.Matcher.HttpCode}<br>`\n\n    case this.LISTENER:\n      return node.key\n\n    case this.RULE:\n      return node.key\n\n    case this.CLUSTER:\n      return node.key\n\n    case this.SERVICE:\n      return `\n        <b>Service</b><br/>\n        Name: ${node.data.serviceName}<br>\n        Status: ${node.data.status}<br>\n        Tasks: ${node.data.runningCount}<br>`\n\n    case this.TASK:\n      return describeTask(node)\n\n    case this.CACHE:\n      return node.key\n\n    default:\n      return node.key\n  }\n}\n\nfunction describeInstance (node) {\n  let desc = '<b>EC2 Instance</b><br/>'\n  let name = findTag(node, 'Name')\n  if (name) {\n    desc += '  Name: ' + name + '<br>'\n  }\n  let description = findTag(node, 'Description')\n  if (description) {\n    desc += '  Description: ' + description + '<br>'\n  }\n  desc += `Type: ${node.data.InstanceType}<br>`\n  desc += `Keyname: ${node.data.KeyName}<br>`\n  desc += `State: ${node.data.State.Name}<br>`\n  if (node.data.PublicIpAddress) {\n    desc += '  IP addr: ' + node.data.PublicIpAddress + '<br>'\n  }\n  return desc\n}\n\nfunction describeVpc (node) {\n  let s = '<b>Virtual Private Cloud (VPC)</b><br/>'\n  let name = findTag(node, 'Name')\n  if (name) {\n    s += '  Name: ' + name + '<br>'\n  }\n  s += '  Id: ' + node.data.VpcId + '<br>'\n  s += `State: ${node.data.State}<br>`\n  let contact = findTag(node, 'Contact')\n  if (contact) {\n    s += '  Contact: ' + contact + '<br>'\n  }\n  return s\n}\n\nfunction describeSecurityGroup (node) {\n  // Return a description\n  let desc = `Security Group<br/>`\n  desc += `Id: ${node.data.GroupId}<br/>`\n  let name = findTag(node, 'Name')\n  if (name) {\n    desc += `Name Tag: ${name}<br/>`\n  }\n  desc += `Description: ${node.data.Description}<br/>`\n  desc += `GroupName: ${node.data.GroupName}<br/>`\n\n  // Route table?\n  // let useVpcRouteTable = true\n  // node.parents.forEach(parent => {\n  //   if (parent.type === this.ROUTETABLE) {\n  //     useVpcRouteTable = false\n  //   }\n  // })\n  // if (useVpcRouteTable) {\n  //   desc += 'Use default route table for VPC<br/>'\n  // }\n  // // IP Address range\n  // desc += `CidrBlock: ${node.data.CidrBlock}<br/>`\n  return desc\n}\n\nfunction describeTask (node) {\n  let desc = `<b>Task</b><br/>`\n  node.data.containers.forEach(c => {\n    desc += `\n      Name: ${c.name}<br>\n      Ports: ${c.networkBindings.hostPort} -&gt; ${c.networkBindings.port}<br>`\n  })\n  desc += `\n    Version: ${node.data.version}<br>\n    Status: ${node.data.lastStatus}<br>\n    Desired Status: ${node.data.desiredStatus}<br>\n    Memory: ${node.data.memory}<br>\n    CPU: ${node.data.cpu}<br>\n  `\n  return desc\n}\n\nfunction findTag (node, tagname) {\n  // Assumes node.data.Tags\n  if (node.data && node.data.Tags) {\n    for (var i = 0; i < node.data.Tags.length; i++) {\n      let tag = node.data.Tags[i]\n      if (tag.Key === tagname) {\n        return tag.Value\n      }\n    }\n  }\n  return ''\n}\nmodule.exports.findTag = findTag\n\n\n\n// WEBPACK FOOTER //\n// ./lib/types.js","import express from 'express'\nimport { Nuxt, Builder } from 'nuxt'\n\nimport api from './api'\n\nconst app = express()\nconst host = process.env.HOST || '127.0.0.1'\nconst port = process.env.PORT || 3001\n\napp.set('port', port)\n\n// Import API Routes\napp.use('/api', api)\n\n// Import and Set Nuxt.js options\nlet config = require('../nuxt.config.js')\nconfig.dev = !(process.env.NODE_ENV === 'production')\n\n// Init Nuxt.js\nconst nuxt = new Nuxt(config)\n\n// Build only in dev mode\nif (config.dev) {\n  const builder = new Builder(nuxt)\n  builder.build()\n}\n\n// Give nuxt middleware to express\napp.use(nuxt.render)\n\n// Listen the server\napp.listen(port, host)\nconsole.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 5\n// module chunks = 0","import { Router } from 'express'\n\nimport users from './users'\nimport graphApi from './graphApi'\n\nconst router = Router()\n\n// Add USERS Routes\nrouter.use(users)\nrouter.use(graphApi)\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/index.js","import { Router } from 'express'\n\nconst router = Router()\n\n// Mock Users\nconst users = [\n  { name: 'Alexandre', stuff: 'Chicken shit' },\n  { name: 'Pooya', stuff: 'Likes frisbee' },\n  { name: 'Sbastien', stuff: 'Sleeps a lot' },\n  { name: 'Phil', stuff: 'Likes VueJS' },\n]\n\n/* GET users listing. */\nrouter.get('/users', function (req, res, next) {\n  console.log('API /users');\n  res.json(users)\n})\n\n/* GET user by ID. */\nrouter.get('/users/:id', function (req, res, next) {\n  const id = parseInt(req.params.id)\n  if (id >= 0 && id < users.length) {\n    res.json(users[id])\n  } else {\n    res.sendStatus(404)\n  }\n})\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/users.js","import { Router } from 'express'\nimport graph from '../misc/graph'\n// import types from '../misc/types'\nimport LRU from 'lru-cache'\nimport download from '../misc/download'\n\n\n// , options = { max: 500\n//             , length: function (n, key) { return n * 2 + key.length }\n//             , dispose: function (key, n) { n.close() }\n//             , maxAge: 1000 * 60 * 60 }\n// , cache = LRU(options)\nlet cache = LRU(10) // sets just the max size to 10 items (actually size, but default size is 1)\n\nconst router = Router()\n\n/* GET user by ID. */\nrouter.get('/graph/:region', function (req, res, next) {\n  console.log('API /graph/:region', req.params)\n  let region = req.params.region\n  console.log(`API: Region is ${region}`);\n\n  // See if we can use the value in the cache.\n  let cacheKey = region\n  let value = cache.get(cacheKey) // \"value\"\n  if (req.query.reload) {\n    console.log('Reloading cache')\n    value = null\n  }\n  if (value) {\n    res.json(value)\n    return\n  }\n\n  // Download all we need from AWS\n  download.downloadEverything(region, false, err => {\n    if (err) {\n      console.log(`Error downloading region ${region}`, err, err.stack);\n      res.sendStatus(500)\n      return;\n    }\n    let index = graph.index()\n    // console.log('Have index:', index)\n    let obj = { }\n    for (var key in index) {\n      obj[key] = index[key]\n    }\n\n    console.log('Setting value in the cache')\n    cache.set(cacheKey, obj)\n\n    res.json(obj)\n  });\n})\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/graphApi.js","module.exports = require(\"aws-sdk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"aws-sdk\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"aws-regions\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"aws-regions\"\n// module id = 10\n// module chunks = 0","\nfunction pad (str, len) {\n  if (str == null) {\n    str = ''\n  }\n  while (str.length < len) {\n    str = str + ' '\n  }\n  return str.substring(0, len)\n}\n\nfunction capitalize (str) {\n  return str.substring(0, 1).toUpperCase() + str.substring(1)\n}\n\nmodule.exports.pad = pad\nmodule.exports.capitalize = capitalize\n\n\n\n// WEBPACK FOOTER //\n// ./server/misc/util.js","module.exports.id = (node, helpers) => {\n  return node.data.SubnetId\n}\n\nmodule.exports.label = (node, {findTag}) => {\n  let name = findTag(node, 'Name')\n  return name || node.data.SubnetId\n}\n\nmodule.exports.description = (node, helpers) => {\n  return node.data.CidrBlock\n}\n\nmodule.exports.describe = (node, {findTag}) => {\n  // Return a description\n  let desc = `Id: ${node.data.SubnetId}<br/>`\n\n  // // See if the subnet's routing table connects to an Internet Gateway\n  // let isPublicSubnet = false\n  // node.parents.forEach(parent => {\n  //   if (parent.type === module.exports.ROUTETABLE && parent.hasPublicRoutes) {\n  //     isPublicSubnet = true\n  //   }\n  // })\n  // if (isPublicSubnet) {\n  //   desc += 'PUBLIC SUBNET<br/>'\n  // } else {\n  //   desc += 'PRIVATE SUBNET<br/>'\n  // }\n\n  let name = findTag(node, 'Name')\n  if (name) {\n    desc += `Name ${name}<br/>`\n  }\n\n  let description = findTag(node, 'Description')\n  if (description) {\n    desc += `Description: ${description}<br/>`\n  }\n\n  // Route table?\n  let useVpcRouteTable = true\n  node.parents.forEach(parent => {\n    if (parent.type === this.ROUTETABLE) {\n      useVpcRouteTable = false\n    }\n  })\n  if (useVpcRouteTable) {\n    desc += 'Use default route table for VPC<br/>'\n  }\n  // IP Address range\n  desc += `CidrBlock: ${node.data.CidrBlock}<br/>`\n  return desc\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/types/subnet.js","module.exports.id = (node, helpers) => {\n  return ``\n}\n\nmodule.exports.label = (node, {findTag}) => {\n  if (node.hasPublicRoutes) {\n    return `${node.data.RouteTableId} (public)`\n  }\n  return `${node.data.RouteTableId} (private)`\n}\n\nmodule.exports.description = (node, helpers) => {\n  return ``\n}\n\nmodule.exports.describe = (node, {findTag, types}) => {\n  // Return a description\n  let desc = ''\n  if (node.hasPublicRoutes) {\n    desc += '  --  HAS PUBLIC ROUTES'\n  }\n  let name = node.findTag('Name')\n  if (name) {\n    desc += '\\n' + name\n  }\n  // See if this is a main route table\n  // node.data.Associations.forEach(assoc => {\n  //   if (assoc.Main) {\n  //     desc += '\\nMain Route table for ' + assoc.RouteTableAssociationId\n  //   }\n  // })\n\n  // Routes\n  desc += '\\n<table class=\"smalltable\">\\n'\n  node.data.Routes.forEach(route => {\n    if (route.GatewayId === 'local') {\n      desc += '<tr><td>' + route.DestinationCidrBlock + '</td><td>  >>>&nbsp;&nbsp;&nbsp;local</td></tr>\\n'\n    } else {\n      let key = `${types.NAT}::${route.GatewayId}`\n      desc += '<tr><td>' + route.DestinationCidrBlock + '</td><td>  >>>&nbsp;&nbsp;&nbsp;<a href=\"?node=' + key + '\">' + route.GatewayId + '</a></td></tr>\\n'\n    }\n  })\n  desc += '</table>'\n  return desc\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/types/routeTable.js","module.exports = {\n  id: (node) => {\n    return node.id\n  },\n\n  label: (node, {findTag}) => {\n    return ``\n    // return node.data.LoadBalancerName\n  },\n\n  description: (node) => {\n    return node.data.DNSName\n  },\n\n  describe: (node, {findTag, types}) => {\n    let withHealthchecks = false\n    // return node.key\n    let desc = ''\n    desc += 'Status: ' + node.data.State.Code + '\\n'\n    let dns = node.data.DNSName\n    if (dns) {\n      desc += 'dns: <a href=\"http://' + dns + '\" target=\"_blank\">' + dns + '</a>\\n'\n    }\n    if (node._listeners) {\n      node._listeners.forEach(listener => {\n        let targetGroup = listener._targetGroupNode\n        if (!targetGroup) {\n          // No target group\n          let link = listener.Protocol.toLowerCase() + '://' + dns + ':' + listener.Port\n          desc += '<a href=\"' + link + '\" target=\"_blank\">Public ' + listener.Protocol.toLowerCase() + ' / ' + listener.Port + '</a> -> NO TARGET GROUP?\\n'\n        } else {\n          // Have a target group\n          // If we have the healthcheck information, we can also show the targets\n          let link = listener.Protocol.toLowerCase() + '://' + dns + ':' + listener.Port + targetGroup.data.HealthCheckPath\n          desc += '<a href=\"' + link + '\" target=\"_blank\">Public ' + listener.Protocol.toLowerCase() + ' / ' + listener.Port + '</a> -> Target Group (<a href=\"?node=' + targetGroup.key + '\">' + targetGroup.id + '</a>)\\n'\n\n          // Add the targets for this target group, if they have been loaded\n          desc += describeTargets(targetGroup, withHealthchecks, types)\n        }\n      })\n    } else {\n      desc += 'INTERNAL ERROR: MISSING _LISTENERS\\n'\n    }\n    return desc\n  }\n}\n\nfunction describeTargets (targetGroup, withHealthchecks, types) {\n  let desc = ''\n  if (withHealthchecks) {\n    if (targetGroup._health && targetGroup._health.length > 0) {\n      targetGroup._health.forEach(health => {\n        // console.log('health=', health);\n        let key = `${types.INSTANCE}::${health.Target.Id}`\n        desc += '    -->> Instance '\n        desc += '<a href=\"?node=' + key + '\">' + health.Target.Id + '</a>'\n        desc += ', port ' + health.Target.Port + '   (' + health.TargetHealth.State + ')\\n'\n      })\n    } else {\n      desc += '    No targets\\n'\n    }\n  } else {\n    desc += 'Unknown targets (--skip-healthchecks is set)\\n'\n  }\n  return desc\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/types/loadBalancer.js","module.exports = {\n  id: (node, helpers) => {\n    // return node.key\n    return node.data.DBInstanceIdentifier\n  },\n\n  label: (node, {findTag}) => {\n    return node.data.DBInstanceIdentifier\n  },\n\n  description: (node, helpers) => {\n    if (node.data.Endpoint) {\n      return `${node.data.Endpoint.Address}:${node.data.Endpoint.Port}`\n    }\n    return ``\n  },\n\n  describe: (node, {findTag}) => {\n    // return ''\n    let desc = ''\n    desc += 'DATABASE ' + node.DBInstanceIdentifier\n    // desc += 'From: ' + node.data.Protocol.toLowerCase() + ' / ' + node.data.Port + '\\n'\n    // desc += 'Healthcheck: ' + node.data.HealthCheckPath + '\\n'\n\n    // Add the targets for this target group, if they have been loaded\n    // desc += describeTargets(node, withHealthchecks)\n    return desc\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/types/database.js","module.exports = require(\"lru-cache\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lru-cache\"\n// module id = 16\n// module chunks = 0","var myAWS = require('./myAWS')\nconst graph = require('./graph')\nconst types = require('../../lib/types')\n\nvar loadBalancersAreLoaded = false;\nvar targetGroupsAreLoaded = false;\nvar instancesAreLoaded = false;\n\nconst debug = false;\n\nfunction findTargetGroupByARN(arn) {\n  // console.log('findTargetGroupByARN(' + arn + ')');\n  let all = graph.nodes();\n  for (var i = 0; i < all.length; i++) {\n    let node = all[i];\n    // if (node.type === types.TARGETGRP) {\n    //   console.log('  tg: ', node.data.TargetGroupArn);\n    // }\n    if (node.type === types.TARGETGRP && node.data.TargetGroupArn === arn) {\n      // console.log('FOUND THE TARGET GROUP!');\n      return node;\n    }\n  }\n  return null;\n}\n\nfunction findInstanceById(id) {\n  // console.log(`findInstanceById(${id})`);\n  let all = graph.nodes();\n  for (var i = 0; i < all.length; i++) {\n    let node = all[i];\n    // if (node.type === types.INSTANCE) {\n    //   console.log('  instance: ', node.data.InstanceId);\n    // }\n    if ((node.type === types.INSTANCE || node.type === types.JUMPBOX) && node.data.InstanceId === id) {\n      // console.log('FOUND THE INSTANCE!');\n      return node;\n    }\n  }\n  return null;\n}\n\nfunction downloadVpcs(callback) {\n  if (debug) console.log('  downloadVpcs()');\n  myAWS.ec2().describeVpcs({}, (err, data) => {\n    if (err) return callback(err);\n\n    // console.log('data=', data);\n    data.Vpcs.forEach(rec => {\n      // console.log('rec=', rec);\n      graph.findNode(types.VPC, rec.VpcId, rec)\n    })\n    return callback(null)\n  })\n}\n\nfunction downloadInstances(callback) {\n  // if (debug) console.log('  downloadInstances()');\n\n  myAWS.ec2().describeInstances({}, (err, data) => {\n    if (err) return callback(err);\n\n    // console.log('data=', data);\n    data.Reservations.forEach(res => {\n      res.Instances.forEach(instance => {\n\n        // See if it is a jumpbox\n        // console.log('instance=', instance);\n        instance.Tags.forEach(tag => {\n          if (tag.Key === 'Name' && tag.Value.indexOf('-jumpbox-') >= 0) {\n            instance._isJumpbox = true\n          }\n        });\n\n        // Create the node\n        let i = graph.findNode(types.INSTANCE, instance.InstanceId, instance)\n\n        // ImageId\n        let img = graph.findNode(types.IMAGE, instance.ImageId, null)\n        i.addChild(img)\n\n        // Availability zone\n        if (instance.Placement && instance.Placement.AvailabilityZone) {\n          let az = graph.findNode(types.AZ, instance.Placement.AvailabilityZone)\n          az.addChild(i)\n        }\n\n        // Remember if it has a public IP\n        if (instance.PublicIpAddress) {\n          let ip = graph.findNode(types.PUBLICIP, instance.PublicIpAddress)\n          ip.addChild(i)\n        }\n\n        // Subnet\n        //ZZZ Can an instance have multiple subnets?\n        let sn = graph.findNode(types.SUBNET, instance.SubnetId)\n        sn.addChild(i)\n\n        // VPC\n        let vpc = graph.findNode(types.VPC, instance.VpcId)\n        vpc.addChild(i)\n\n        // Security groups\n        instance.SecurityGroups.forEach(sg => {\n          let g = graph.findNode(types.SECGRP, sg.GroupId)\n          g.addChild(i)\n          i.addChild(g)\n        })\n      })\n    })\n    instancesAreLoaded = true;\n    return callback(null)\n  })\n}\n\nfunction downloadSubnets(callback) {\n  if (debug) console.log('  downloadSubnets()');\n\n  // let describe = types.describe\n\n  myAWS.ec2().describeSubnets({}, (err, data) => {\n    if (err) return callback(err);\n\n    // console.log('data=', data);\n    data.Subnets.forEach(rec => {\n      let sn = graph.findNode(types.SUBNET, rec.SubnetId, rec)\n\n      // Add this to it's VPC\n      let v = graph.findNode(types.VPC, rec.VpcId, null)\n      v.addChild(sn)\n\n      // Add this to it's AvailabilityZone\n      let az = graph.findNode(types.AZ, rec.AvailabilityZone, null)\n      az.addChild(sn)\n    })\n    return callback(null)\n  })\n}\n\nfunction downloadSecurityGroups(callback) {\n  if (debug) console.log('  downloadSecurityGroups()');\n  // let describe = node => {\n  //   let desc = ''\n  //   desc += '  Name: ' + node.data.GroupName + '\\n'\n  //   desc += '  Description: ' + node.data.Description + '\\n'\n  //   return desc\n  // }\n\n  myAWS.ec2().describeSecurityGroups({}, (err, data) => {\n    if (err) return callback(err);\n    data.SecurityGroups.forEach(grp => {\n      // console.log('grp=', grp);\n      let g = graph.findNode(types.SECGRP, grp.GroupId, grp)\n\n      // Add this to it's VPC\n      let v = graph.findNode(types.VPC, grp.VpcId, null)\n      v.addChild(g)\n    })\n    return callback(null)\n  })\n}\n\nfunction downloadNatGateways(callback) {\n  if (debug) console.log('  downloadNatGateways()');\n  // let describe = node => {\n  //   let desc = ''\n  //   desc += '  State: ' + node.data.State + '\\n';\n  //   return desc\n  // }\n\n  myAWS.ec2().describeNatGateways({}, (err, data) => {\n    if (err) return callback(err);\n\n    // console.log('data=', data);\n    data.NatGateways.forEach(grp => {\n      console.log('nat is ' + grp.NatGatewayId);\n      let g = graph.findNode(types.NAT, grp.NatGatewayId, grp)\n\n      if (grp.State !== 'deleted') {\n        // Add this to it's subnet\n        let sn = graph.findNode(types.SUBNET, grp.SubnetId, null)\n        sn.addChild(g)\n\n        // Add this to it's VPC\n        let v = graph.findNode(types.VPC, grp.VpcId, null)\n        v.addChild(g)\n\n        // Add it's public IPs\n        grp.NatGatewayAddresses.forEach(addr => {\n          if (addr.NetworkInterfaceId) {\n            let iface = graph.findNode(types.NETIFACE, addr.NetworkInterfaceId, null)\n            g.addChild(iface)\n          }\n          if (addr.PublicIp) {\n            let ip = graph.findNode(types.PUBLICIP, addr.PublicIp, null)\n            g.addChild(ip)\n          }\n        })\n      }\n    })\n    return callback(null)\n  })\n}\n\nfunction downloadInternetGateways(callback) {\n  if (debug) console.log('  downloadInternetGateways()');\n  // let describe = node => {\n  //   let desc = ''\n  //   let name = node.findTag('Name')\n  //   if (name) {\n  //     desc += '  Name: ' + name + '\\n'\n  //   }\n  //   return desc\n  // }\n\n  // An Internet Gateway provides the means by which the stuff in the\n  // VPC connects to the Internet. I believe a NAT will quietly use\n  // the Internet Gateway, but doesn't actually reference it.\n  myAWS.ec2().describeInternetGateways({}, (err, data) => {\n    if (err) return callback(err);\n\n    data.InternetGateways.forEach(rec => {\n      // console.log('\\n\\n\\nINTERNET GATEWAY=', rec)\n      let igw = graph.findNode(types.IGW, rec.InternetGatewayId, rec)\n\n      // See where it is attached\n      rec.Attachments.forEach(attachment => {\n        if (attachment.VpcId) {\n          let vpc = graph.findNode(types.VPC, attachment.VpcId)\n          vpc.addChild(igw)\n        }\n      })\n    })\n    return callback(null)\n  })\n}\n\n// Elastic IPs\nfunction downloadAddresses(callback) {\n  if (debug) console.log('  downloadAddresses()');\n  // let describe = node => {\n  //   // Return a description\n  //   let desc = ''\n  //   desc += '  IP Address: ' + node.data.PublicIp + '\\n';\n  //   return desc\n  // }\n\n  myAWS.ec2().describeAddresses({}, (err, data) => {\n    if (err) return callback(err);\n\n    // console.log('data=', data);\n    data.Addresses.forEach(rec => {\n      let addr = graph.findNode(types.ADDR, rec.AllocationId, rec)\n\n      // Remember if it has a public IP\n      if (rec.PublicIp) {\n        let ip = graph.findNode(types.PUBLICIP, rec.PublicIp)\n        ip.addChild(addr)\n      }\n    })\n    return callback(null)\n  })\n}\n\nfunction downloadAvailabilityZones(callback) {\n  if (debug) console.log('  downloadAvailabilityZones()');\n  // let describe = node => {\n  //   let desc = ''\n  //   // desc += '  IP Address: ' + node.data.PublicIp + '\\n';\n  //   return desc\n  // }\n\n  myAWS.ec2().describeAvailabilityZones({}, (err, data) => {\n    if (err) return callback(err);\n\n    // console.log('data=', data);\n    data.AvailabilityZones.forEach(rec => {\n      let g = graph.findNode(types.AZ, rec.ZoneName, rec)\n    })\n    return callback(null)\n  })\n}\n\nfunction downloadKeyPairs(callback) {\n  if (debug) console.log('  downloadKeyPairs()');\n  // let describe = node => {\n  //   let desc = ''\n  //   return desc\n  // }\n\n  myAWS.ec2().describeKeyPairs({}, (err, data) => {\n    if (err) return callback(err);\n\n    // console.log('data=', data);\n    data.KeyPairs.forEach(rec => {\n      // This will create the node\n      graph.findNode(types.KEYPAIR, rec.KeyName, rec)\n    })\n    return callback(null)\n  })\n}\n\n// Inbound interface from the Internet\nfunction downloadNetworkInterfaces(callback) {\n  if (debug) console.log('  downloadNetworkInterfaces()');\n  // let describe = node => {\n  //   let desc = ''\n  //   desc += node.data.Description\n  //   return desc\n  // }\n\n  myAWS.ec2().describeNetworkInterfaces({}, (err, data) => {\n    if (err) return callback(err);\n\n    // console.log('data=', data);\n    data.NetworkInterfaces.forEach(rec => {\n      // console.log('\\nNETWORK INTERFACE:', rec);\n      let ni = graph.findNode(types.NETIFACE, rec.NetworkInterfaceId, rec)\n\n      // Public IP via association\n      if (rec.Association && rec.Association.PublicIp) {\n        let ip = graph.findNode(types.PUBLICIP, rec.Association.PublicIp)\n        ip.addChild(ni)\n      }\n\n      // Attachment\n      if (rec.Attachment) {\n        if (rec.Attachment.InstanceId) {\n          let instance = graph.findNode(types.INSTANCE, rec.Attachment.InstanceId)\n          ni.addChild(instance)\n        }\n      }\n\n      // AvailabilityZone\n      let az = graph.findNode(types.AZ, rec.AvailabilityZone)\n      az.addChild(ni)\n\n      // Subnet\n      let subnet = graph.findNode(types.SUBNET, rec.SubnetId)\n      subnet.addChild(ni)\n\n      // VPC\n      let vpc = graph.findNode(types.VPC, rec.VpcId)\n      vpc.addChild(ni)\n    })\n    return callback(null)\n  })\n}\n\nfunction downloadRouteTables(callback) {\n  if (debug) console.log('  downloadRouteTables()');\n\n  myAWS.ec2().describeRouteTables({}, (err, data) => {\n    if (err) return callback(err);\n\n    // console.log('routeTables=', data);\n    data.RouteTables.forEach(rec => {\n      // console.log('\\nRoute table:', rec);\n      let rt = graph.findNode(types.ROUTETABLE, rec.RouteTableId, rec)\n\n      // Look for routes to Internet Gateways\n      let gateways = [] // Only add each gateway it once\n      rec.Routes.forEach(route => {\n        if (route.GatewayId === 'local') {\n          // Routing to the local subnet\n        } else if (route.NatGatewayId) {\n          // Routes to a NAT\n          let id = route.NatGatewayId\n          if (!gateways[id]) {\n            let nat = graph.findNode(types.NAT, id)\n            rt.addChild(nat)\n            // Having a route to the internet via a NAT is the definition of a \"Public Subnet\"\n            rt.hasPublicRoutes = true\n            gateways[id] = true\n          }\n        } else if (route.GatewayId) {\n          // Routes to an Internet Gateway\n          let id = route.GatewayId\n          if (!gateways[id]) {\n            let igw = graph.findNode(types.IGW, id)\n            rt.addChild(igw)\n            // // Having a route to an Internet Gateway is also the definition of a \"Public Subnet\"\n            // rt.hasPublicRoutes = true\n            gateways[id] = true\n          }\n        }\n      })\n\n      // Subnets mapped to this routing table\n      rec.Associations.forEach(assoc => {\n        if (assoc.SubnetId) {\n          let sn = graph.findNode(types.SUBNET, assoc.SubnetId)\n          rt.addChild(sn)\n        }\n      })\n\n      // VPC\n      let vpc = graph.findNode(types.VPC, rec.VpcId)\n      vpc.addChild(rt)\n    })\n    return callback(null)\n  })\n}\n\nfunction describeTargets(targetGroup, withHealthchecks) {\n  let desc = ''\n  if (withHealthchecks) {\n    if (targetGroup._health && targetGroup._health.length > 0) {\n      targetGroup._health.forEach(health => {\n        // console.log('health=', health);\n        let key = graph.keyForNode(types.INSTANCE, health.Target.Id)\n        desc += '    -->> Instance '\n        desc += '<a href=\"?node=' + key + '\">' + health.Target.Id + '</a>'\n        desc += ', port ' + health.Target.Port + '   (' + health.TargetHealth.State + ')\\n'\n      })\n    } else {\n      desc += '    No targets\\n'\n    }\n  } else {\n    desc += 'Unknown targets (--skip-healthchecks is set)\\n'\n  }\n  return desc\n}\n\nfunction downloadLoadBalancers(withHealthchecks, callback) {\n  if (debug) console.log('  downloadLoadBalancers()');\n\n  if (!targetGroupsAreLoaded) {\n    console.log('ERROR: downloadLoadBalancers() called before downloadTargetGroups()');\n    console.log('Links between load balancers and target groups will be missing.');\n  }\n\n  // We load the Load Balancers here (into nodeIndex),\n  // and Listeners into\n  //    => load-balancer-node._listeners,\n  // and the target group for each Listener into\n  //    => load-balancer-node._listeners[x]._targetGroupNode\n  // and the targets and their health into\n  //    => load-balancer-node._listeners[x]._targetGroupNode._health\n  // http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/ELBv2.html#describeLoadBalancers-property\n  myAWS.elbv2().describeLoadBalancers({}, (err, data) => {\n    if (err) return callback(err);\n    // console.log('data=', data);\n\n    (function nextALB(index) {\n      if (index >= data.LoadBalancers.length) {\n        loadBalancersAreLoaded = true;\n        return callback(null)\n      }\n      let rec = data.LoadBalancers[index]\n      let alb = graph.findNode(types.ALB, rec.LoadBalancerName, rec)\n\n      // Availability Zones and Subnets\n      rec.AvailabilityZones.forEach(az => {\n        let az2 = graph.findNode(types.AZ, az.ZoneName)\n        az2.addChild(alb)\n\n        let subnet = graph.findNode(types.SUBNET, az.SubnetId)\n        subnet.addChild(alb)\n      })\n\n      // Security Groups\n      rec.SecurityGroups.forEach(sgid => {\n        let sg = graph.findNode(types.SECGRP, sgid)\n        sg.addChild(alb)\n      })\n\n      // VPC\n      let vpc = graph.findNode(types.VPC, rec.VpcId)\n      vpc.addChild(alb)\n\n      // Get the listeners for this load Balancer\n      // http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/ELBv2.html#describeListeners-property\n      myAWS.elbv2().describeListeners({\n        LoadBalancerArn: rec.LoadBalancerArn\n      }, (err, data) => {\n        if (err) return callback(err);\n\n        // console.log('listener data=', data);\n        alb._listeners = data.Listeners;\n        // return callback(null)\n\n        // Iterate through the listeners\n        (function nextListener(listenerIndex) {\n          if (listenerIndex >= data.Listeners.length) {\n            return nextALB(index + 1)\n          }\n          let listener = data.Listeners[listenerIndex]\n          // console.log('\\n\\nLISTENER=', listener);\n\n          // The listener contains 'DefaultActions', which will be\n          // the ARN of a target group to forward to.\n          listener.DefaultActions.forEach(action => {\n\n            // Find the Target Group for this Action\n            let targetGroup = findTargetGroupByARN(action.TargetGroupArn)\n            if (!targetGroup) {\n              // No target group, so ignore this listener\n              //ZZZZ Should check the default target group\n              return nextListener(listenerIndex + 1);\n            }\n            listener._targetGroupNode = targetGroup\n            alb.addChild(targetGroup)\n\n            // Load the health of the targets, if required\n            // console.log('target group=', targetGroup);\n            if (!withHealthchecks) {\n              // We are skipping health check, to load faster\n              return nextListener(listenerIndex + 1);\n            }\n            // See if the healthcheck info is already loaded for this target group\n            if (listener._targetGroupNode._health) {\n              return nextListener(listenerIndex + 1);\n            }\n\n            // Load the health of the targets in the target group\n            // http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/ELBv2.html#describeTargetHealth-property\n            // console.log('load health for ' + targetGroup.data.TargetGroupArn);\n            myAWS.elbv2().describeTargetHealth({\n              TargetGroupArn: targetGroup.data.TargetGroupArn\n            }, (err, healthData) => {\n              if (err) return callback(err);\n              listener._targetGroupNode._health = healthData.TargetHealthDescriptions\n              // console.log('target health=', healthData);\n              healthData.TargetHealthDescriptions.forEach(health => {\n                // Instance\n                // console.log('health=', health);\n                let instance = graph.findNode(types.INSTANCE, health.Target.Id)\n                alb.addChild(instance)\n              }) //- next health\n              return nextListener(listenerIndex + 1);\n            }) //- describeTargetHealth\n          }) //- next action\n        })(0) //- next listener\n      }) //- describeListeners\n    })(0) //- nextALB\n  }) //- describeLoadBalancers\n}\n\nfunction downloadTargetGroups(withHealthchecks, callback) {\n  if (debug) console.log('  downloadTargetGroups()');\n\n  // Load the definitions\n  myAWS.elbv2().describeTargetGroups({}, (err, data) => {\n    if (err) return callback(err);\n\n    // console.log('data=', data);\n    data.TargetGroups.forEach(rec => {\n      // console.log('tg=', rec);\n      let tg = graph.findNode(types.TARGETGRP, rec.TargetGroupName, rec)\n\n      // VPC\n      let vpc = graph.findNode(types.VPC, rec.VpcId)\n      vpc.addChild(tg)\n    })\n    targetGroupsAreLoaded = true;\n    return callback(null)\n  })\n}\n\n/*\n*   Get the container instances for a cluster.\n*/\nfunction loadContainerInstancesForCluster(cluster, callback/* (err, instanceForContainer) */) {\n  let clusterName = cluster.data.clusterName;\n  if (debug) console.log(`  - getting list of container instances (cluster=${clusterName})`);\n  let instanceForContainer = [ ]; // containerInstanceArn -> node of EC2 instance\n  myAWS.ecs().listContainerInstances({\n    cluster: clusterName\n  }, function(err, containerInstanceList) {\n    if (err) return callback(err);\n    if (containerInstanceList.containerInstanceArns.length == 0) {\n      return callback(null, instanceForContainer);\n    }\n    var params = {\n      cluster: clusterName,\n      containerInstances: containerInstanceList.containerInstanceArns\n    };\n    if (debug) console.log(`  - getting container instance details (cluster=${clusterName}, ${containerInstanceList.containerInstanceArns.length} container instances)`);\n    myAWS.ecs().describeContainerInstances(params, function(err, containerDefinitions) {\n      if (err) return callback(err);\n\n      // Add the container instances to our graph\n      // console.log(`containerDefinitions=`, containerDefinitions);\n      containerDefinitions.containerInstances.forEach(function(containerDef) {\n        let instance = findInstanceById(containerDef.ec2InstanceId)\n        cluster.addChild(instance);\n\n        // Remember this, so we can create a link between tasks and this EC2 instance\n        instanceForContainer[containerDef.containerInstanceArn] = instance;\n      }); // next containerInstance\n      return callback(null, instanceForContainer);\n    });//- describeContainerInstances\n  });//- listContainerInstances\n};//- function loadContainerInstancesForCluster()\n\n/*\n*   Get the services for this cluster.\n*\n*   https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/ECS.html#describeServices-property\n*/\nfunction loadServicesForCluster(cluster, callback/* (err) */) {\n  if (debug) console.log(`  - getting list of services for cluster ${cluster.data.clusterName}`);\n\n  let clusterName = cluster.data.clusterName;\n  let clusterArn = cluster.data.clusterArn;\n  myAWS.ecs().listServices({\n    cluster: clusterName\n  }, function(err, serviceListData) {\n    if (err) return callback(err);\n    if (serviceListData.serviceArns.length === 0) {\n      return callback(null)\n    }\n    if (debug) console.log('  - getting service details');\n    myAWS.ecs().describeServices({\n      services: serviceListData.serviceArns,\n      cluster: clusterArn\n    }, function(err, serviceDefinitions) {\n      if (err) return callback(err);\n\n      // console.log('serviceDefinitions=', serviceDefinitions);\n      // console.log(`Got services`);\n      serviceDefinitions.services.forEach(serviceDef => {\n\n        // Next Service\n        // console.log('serviceDef=', serviceDef);\n        let service = graph.findNode(types.SERVICE, serviceDef.serviceName, serviceDef)\n        cluster.addChild(service);\n\n        // Find the load balancer nodes for this service.\n        serviceDef.loadBalancers.forEach(lb => {\n          let tg = findTargetGroupByARN(lb.targetGroupArn);\n          if (tg) {\n            tg.addChild(service);\n            // service.addChild(tg);\n          } else {\n            console.log(`ERROR: Service ${service.key} refers to unknown target group ${lb.targetGroupArn}`);\n          }\n        }); //- next load balancer\n      }); //- next service\n      return callback(null);\n    }); //- describeServices\n  }); //- listServices\n}//- loadServicesForCluster\n\n/*\n*   Get the task definitions for a cluster.\n*/\nfunction loadTasksForCluster(clusterName, callback/* (err,taskDefinitions) */) {\n  if (debug) console.log(`  - getting list of tasks (cluster=${clusterName})`);\n  myAWS.ecs().listTasks({\n    cluster: clusterName\n  }, function(err, taskList) {\n    if (err) return callback(err);\n    // console.log('taskList=', taskList); // successful response\n    if (taskList.taskArns.length === 0) {\n      return callback(null, [ ]); // No tasks\n    }\n    var params = {\n      tasks: taskList.taskArns,\n      cluster: clusterName\n    };\n    if (debug) console.log('- getting task details');\n    myAWS.ecs().describeTasks(params, function(err, taskDefinitions) {\n      if (err) return callback(err);\n\n      // Have the task definitions\n      return callback(null, taskDefinitions.tasks);\n    }); //- describeTasks\n  }); //- listTasks\n}\n\nfunction downloadClusters(callback) {\n  if (debug) console.log('  downloadClusters()');\n\n  // Check the load balancers have been loaded already,\n  // as we'll need to link to them from ECS services.\n  if (!loadBalancersAreLoaded) {\n    console.log('ERROR: downloadClusters() called before downloadLoadBalancers()');\n    console.log('Links between services and load balancers will be unknown.');\n  }\n  if (!targetGroupsAreLoaded) {\n    console.log('ERROR: downloadClusters() called before downloadTargetGroups()');\n    console.log('Links between services and target groups will be unknown.');\n  }\n  if (!instancesAreLoaded) {\n    console.log('ERROR: downloadClusters() called before downloadInstances()');\n    console.log('Links between services and instances will be unknown.');\n  }\n\n  let describe = (node) => {\n    let desc = ''\n    let name = node.findTag('Name');\n    if (name) {\n      desc += '  Name: ' + name + '\\n'\n    }\n    return desc\n  }\n\n  /*\n  *   Get the clusters for this region.\n  *\n  *   See https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/ECS.html#listClusters-property\n  */\n  if (debug) console.log('  - getting list of clusters');\n  myAWS.ecs().listClusters({ }, function(err, clusterList) {\n    if (err) return callback(err);\n    if (debug) console.log('  - getting cluster details');\n    myAWS.ecs().describeClusters({\n      clusters: clusterList.clusterArns\n    }, function(err, clusterDefinitions) {\n      if (err) return callback(err);\n\n      // console.log('clusterDefinitions: ', clusterDefinitions);\n\n      // Loop through the clusters.\n      (function nextCluster(index) {\n        // Past the last cluster?\n        if (index >= clusterDefinitions.clusters.length) {\n          return callback(null)\n        }\n\n        // Next Cluster\n        let clusterDef = clusterDefinitions.clusters[index]\n        let cluster = graph.findNode(types.CLUSTER, clusterDef.clusterName, clusterDef)\n        console.log('Got cluster ' + clusterDef.clusterName);\n\n        /*\n        *   Get the container instances for this cluster.\n        */\n        loadContainerInstancesForCluster(cluster, (err, instanceForContainer) => {\n          if (err) return callback(err);\n\n            loadServicesForCluster(cluster, (err) => {\n              if (err) return callback(err);\n\n                loadTasksForCluster(clusterDef.clusterName, (err, taskDefinitions) => {\n                  if (err) return callback(err);\n\n                    // Loop through the task definitions.\n                    // console.log(`taskDefinitions=`, taskDefinitions);\n                    taskDefinitions.forEach(taskDef => {\n                      // console.log(`Task ${taskDef.taskDefinitionArn}`);\n                      // console.log(`  startedBy:`, taskDef.startedBy);\n                      // console.log(`  Containers:`, taskDef.containers);\n                      // console.log(`  Last status ${taskDef.lastStatus}`);\n\n                      // Get the task name from it's definition. For example, the end of:\n                      // 'arn:aws:ecs:ap-southeast-1:238285074004:task-definition/nbt-trsgms1-authservice:6'\n                      let pos = taskDef.taskDefinitionArn.lastIndexOf('/')\n                      let taskName = taskDef.taskDefinitionArn.substring(pos + 1)\n                      pos = taskName.lastIndexOf(':');\n                      taskName = taskName.substring(0, pos)\n                      // console.log(`task name is ${taskName}`);\n\n                      // See if it was started by a service\n                      // console.log('Looking for service parent');\n                      let parentOfTask = cluster;\n                      if (taskDef.startedBy) {\n                        // console.log('checking services');\n                        cluster.children.forEach(function(childKey) {\n                          let child = graph.nodeWithKey(childKey);\n                          if (child.type === types.SERVICE) {\n                            let service = child;\n                            let deployments = service.data.deployments;\n                            for (var cnt = 0; cnt < deployments.length; cnt++) {\n                              if (deployments[cnt].id === taskDef.startedBy) {\n                                // Yep, was started by this service.\n                                // console.log('\\n\\nWas started by ', service);\n                                parentOfTask = service;\n                                break;\n                              }\n                            }//- next deployment\n                          }//- child is a service\n                        })// next child of the cluster\n                      }//- startedBy != null\n\n                      // Define the task, and add it to it's parent.\n                      let task = graph.findNode(types.TASK, taskName, taskDef);\n                      parentOfTask.addChild(task);\n\n                      // Link the task to the containerInstance's EC2 instance.\n                      let instance = instanceForContainer[taskDef.containerInstanceArn];\n                      if (instance) {\n                        task.addChild(instance);\n                      } else {\n                        console.log(`ERROR: task ${taskDef.taskArn} refers to unknown containerInstance ${taskDef.containerInstanceArn}`);\n                      }\n\n                    }); //- next task\n\n                    return nextCluster(index + 1)\n                }); //- loadTasksForCluster\n            }); //- loadServicesForCluster\n        }); //- loadContainerInstancesForCluster\n      })(0); // next cluster\n    }); //- describeClusters\n  }); //- listClusters\n}\n\nfunction downloadDatabases(callback) {\n  if (debug) console.log('  downloadDatabases()');\n\n  // Load the definitions\n  myAWS.rds().describeDBInstances({}, (err, data) => {\n    if (err) return callback(err);\n\n    //console.log('data=', data);\n    data.DBInstances.forEach(rec => {\n      // console.log('\\n\\n\\nDB =>', rec);\n      let db = graph.findNode(types.DATABASE, rec.DBInstanceIdentifier, rec)\n\n      rec.VpcSecurityGroups.forEach(sgDef => {\n        let sg = graph.findNode(types.SECGRP, sgDef.VpcSecurityGroupId)\n        sg.addChild(db)\n      })\n      let az = graph.findNode(types.AZ, rec.AvailabilityZone)\n      az.addChild(db)\n\n      // VPC\n      // let vpc = graph.findNode(types.VPC, rec.VpcId)\n      // vpc.addChild(tg)\n    })\n    targetGroupsAreLoaded = true;\n    return callback(null)\n  })\n}\n\n// See http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/EC2.html#describeSubnets-property\nfunction downloadEverything(region, withHealthchecks, callback/* (err) */) {\n  console.log('downloadEverything()');\n  console.log(`Region is ${region} (${myAWS.regionDescription(region)})`);\n\n  myAWS.checkAwsRegion(region)\n\n  // Clear existing list of nodes and reload everything\n  graph.reset();\n  downloadSecurityGroups(err => {\n    if (err) return callback(err)\n    downloadVpcs(err => {\n      if (err) return callback(err)\n      downloadSubnets(err => {\n        if (err) return callback(err)\n        downloadNatGateways(err => {\n          if (err) return callback(err)\n          downloadInternetGateways(err => {\n            if (err) return callback(err)\n            downloadInstances(err => {\n              if (err) return callback(err)\n              downloadAddresses(err => {\n                if (err) return callback(err)\n                downloadAvailabilityZones(err => {\n                  if (err) return callback(err)\n                  downloadKeyPairs(err => {\n                    if (err) return callback(err)\n                    downloadNetworkInterfaces(err => {\n                      if (err) return callback(err)\n                      myAWS.downloadRegions(err => {\n                        if (err) return callback(err)\n                        downloadRouteTables(err => {\n                          if (err) return callback(err)\n                          downloadTargetGroups(withHealthchecks, err => { // Must be before load balancers\n                            if (err) return callback(err)\n                            downloadLoadBalancers(withHealthchecks, err => {\n                              if (err) return callback(err)\n                              downloadClusters(err => {\n                                if (err) return callback(err)\n                                downloadDatabases(err => {\n                                  if (err) return callback(err)\n\n                                  console.log('finished downloading everything');\n                                  return callback(null)\n                                })\n                              })\n                            })\n                          })\n                        })\n                      })\n                    })\n                  })\n                })\n              })\n            })\n          })\n        })\n      })\n    })\n  })\n}\n\nmodule.exports.downloadInstances = downloadInstances;\nmodule.exports.downloadVpcs = downloadVpcs;\nmodule.exports.downloadSubnets = downloadSubnets;\nmodule.exports.downloadNatGateways = downloadNatGateways;\nmodule.exports.downloadInternetGateways = downloadInternetGateways;\nmodule.exports.downloadAddresses = downloadAddresses;\nmodule.exports.downloadAvailabilityZones = downloadAvailabilityZones;\nmodule.exports.downloadKeyPairs = downloadKeyPairs;\nmodule.exports.downloadNetworkInterfaces = downloadNetworkInterfaces;\nmodule.exports.downloadRouteTables = downloadRouteTables;\nmodule.exports.downloadLoadBalancers = downloadLoadBalancers;\nmodule.exports.downloadTargetGroups = downloadTargetGroups;\nmodule.exports.downloadClusters = downloadClusters;\nmodule.exports.downloadDatabases = downloadDatabases;\nmodule.exports.downloadEverything = downloadEverything;\n\n\n\n// WEBPACK FOOTER //\n// ./server/misc/download.js","module.exports = {\n  /*\n  ** Headers of the page\n  */\n  head: {\n    title: 'starter',\n    meta: [\n      { charset: 'utf-8' },\n      {'http-equiv': 'X-UA-Compatible', content: 'IE=edge'},// From https://github.com/nuxt/nuxt.js/issues/1395\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\n      { hid: 'description', name: 'description', content: 'Nuxt.js project' }\n    ],\n    css: [\n      // '~/node_modules/bulma/css/bulma.css'\n    ],\n    link: [\n      { rel: 'icon', type: 'image/png', href: '/favicon.png' },\n      { rel: 'stylesheet', href: '//fonts.googleapis.com/css?family=Lato|Open+Sans' }\n    ],\n    build: {\n      extractCSS: true\n    }\n  },\n  /*\n  ** Global CSS\n  */\n  css: [\n    '~/assets/css/main.scss',\n    '~/node_modules/vis/dist/vis-network.min.css',\n  ],\n  loading: {\n    color: '#41b883'\n  },\n  /*\n  ** Add axios globally\n  */\n  build: {\n    vendor: ['axios', 'vis', 'lodash'],\n    /*\n    ** Run ESLINT on save\n    */\n    extend (config, ctx) {\n      if (ctx.isClient) {\n        config.module.rules.push({\n          enforce: 'pre',\n          test: /\\.(js|vue)$/,\n          loader: 'eslint-loader',\n          exclude: /(node_modules)/\n        })\n      }\n    },\n    postcss: {\n       plugins: {\n         'postcss-custom-properties': false\n       }\n     }\n  },\n  modules: [\n    // '@nuxtjs/bulma'\n    'nuxt-buefy'\n  ]\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js"],"sourceRoot":""}